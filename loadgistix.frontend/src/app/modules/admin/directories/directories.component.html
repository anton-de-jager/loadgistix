<!-- <div class="absolute inset-0 flex flex-col flex-auto min-w-0 sm:overflow-hidden bg-card dark:bg-gray-800 sticky"
    [style.margin-right]="showAdverts?'208px':'0px'">
    <div class="flex flex-auto flex-col flex-shrink-0 min-w-0 overflow-x-auto">
        <table *ngIf="dataSource" mat-table [dataSource]="dataSource" matSort>

            <ng-container matColumnDef="directoryCategoryId">
                <th mat-header-cell class='table-header-column bg-primary text-on-primary' *matHeaderCellDef>
                    <p class='table-header-column bg-primary text-on-primary' mat-sort-header="directoryCategoryId">Category</p>
                </th>
                <td mat-cell *matCellDef="let row" class="selectable" (click)="initUpsert(row)"> {{row.directoryCategoryId}} </td>
            </ng-container>
            <ng-container matColumnDef="directoryCategoryDescription">
                <th mat-header-cell class='table-header-column bg-primary text-on-primary' *matHeaderCellDef>
                    <p class='table-header-column bg-primary text-on-primary' mat-sort-header="directoryCategoryDescription">Category</p>
                </th>
                <td mat-cell *matCellDef="let row" class="selectable" (click)="initUpsert(row)">
                    {{row.directoryCategoryDescription}} </td>
            </ng-container>
            <ng-container matColumnDef="companyName">
                <th mat-header-cell class='table-header-column bg-primary text-on-primary' *matHeaderCellDef>
                    <p class='table-header-column bg-primary text-on-primary' mat-sort-header="companyName">Company Name</p>
                </th>
                <td mat-cell *matCellDef="let row" class="selectable" (click)="initUpsert(row)"> {{row.companyName}} </td>
            </ng-container>
            <ng-container matColumnDef="description">
                <th mat-header-cell class='table-header-column bg-primary text-on-primary' *matHeaderCellDef>
                    <p class='table-header-column bg-primary text-on-primary' mat-sort-header="description">Description</p>
                </th>
                <td mat-cell *matCellDef="let row" class="selectable" (click)="initUpsert(row)"> {{row.description}} </td>
            </ng-container>
            <ng-container matColumnDef="email">
                <th mat-header-cell class='table-header-column bg-primary text-on-primary' *matHeaderCellDef>
                    <p class='table-header-column bg-primary text-on-primary' mat-sort-header="email">Email</p>
                </th>
                <td mat-cell *matCellDef="let row" class="selectable" (click)="initUpsert(row)"> {{row.email}} </td>
            </ng-container>
            <ng-container matColumnDef="phone">
                <th mat-header-cell class='table-header-column bg-primary text-on-primary' *matHeaderCellDef>
                    <p class='table-header-column bg-primary text-on-primary' mat-sort-header="phone">Phone</p>
                </th>
                <td mat-cell *matCellDef="let row" class="selectable" (click)="initUpsert(row)"> {{row.phone}} </td>
            </ng-container>
            <ng-container matColumnDef="website">
                <th mat-header-cell class='table-header-column bg-primary text-on-primary' *matHeaderCellDef>
                    <p class='table-header-column bg-primary text-on-primary' mat-sort-header="website">Website</p>
                </th>
                <td mat-cell *matCellDef="let row" class="selectable" (click)="initUpsert(row)"> {{row.website}} </td>
            </ng-container>
            <ng-container matColumnDef="instagram">
                <th mat-header-cell class='table-header-column bg-primary text-on-primary' *matHeaderCellDef>
                    <p class='table-header-column bg-primary text-on-primary' mat-sort-header="instagram">Instagram Link</p>
                </th>
                <td mat-cell *matCellDef="let row" class="selectable" (click)="initUpsert(row)"> {{row.instagram}} </td>
            </ng-container>
            <ng-container matColumnDef="facebook">
                <th mat-header-cell class='table-header-column bg-primary text-on-primary' *matHeaderCellDef>
                    <p class='table-header-column bg-primary text-on-primary' mat-sort-header="facebook">Facebook Link</p>
                </th>
                <td mat-cell *matCellDef="let row" class="selectable" (click)="initUpsert(row)"> {{row.facebook}} </td>
            </ng-container>
            <ng-container matColumnDef="twitter">
                <th mat-header-cell class='table-header-column bg-primary text-on-primary' *matHeaderCellDef>
                    <p class='table-header-column bg-primary text-on-primary' mat-sort-header="twitter">Twitter Link</p>
                </th>
                <td mat-cell *matCellDef="let row" class="selectable" (click)="initUpsert(row)"> {{row.twitter}} </td>
            </ng-container>
            <ng-container matColumnDef="addressLat">
                <th mat-header-cell class='table-header-column bg-primary text-on-primary' *matHeaderCellDef>
                    <p class='table-header-column bg-primary text-on-primary' mat-sort-header="addressLat">Address Lat</p>
                </th>
                <td mat-cell *matCellDef="let row" class="selectable" (click)="initUpsert(row)"> {{row.addressLat}} </td>
            </ng-container>
            <ng-container matColumnDef="addressLon">
                <th mat-header-cell class='table-header-column bg-primary text-on-primary' *matHeaderCellDef>
                    <p class='table-header-column bg-primary text-on-primary' mat-sort-header="addressLon">Address Lon</p>
                </th>
                <td mat-cell *matCellDef="let row" class="selectable" (click)="initUpsert(row)"> {{row.addressLon}} </td>
            </ng-container>
            <ng-container matColumnDef="addressLabel">
                <th mat-header-cell class='table-header-column bg-primary text-on-primary' *matHeaderCellDef>
                    <p class='table-header-column bg-primary text-on-primary' mat-sort-header="addressLabel">Address</p>
                </th>
                <td mat-cell *matCellDef="let row" class="selectable" (click)="initUpsert(row)"> {{row.addressLabel}} </td>
            </ng-container>
            <ng-container matColumnDef="avatar">
                <th mat-header-cell class='table-header-column bg-primary text-on-primary' *matHeaderCellDef style="width:60px">
                    <p class="bg-primary text-on-primary" mat-sort-header="avatar">Photo</p>
                </th>
                <td mat-cell *matCellDef="let row" class="selectable"> <span
                        *ngIf="row">
                        <img alt="" class="avatar-table -skew-y-3 rounded shadow"
                            [src]="row.avatar ? (imagesFolder + 'Directories/' + row.id + row.avatar + '?t=' + this.timestamp) : 'assets/images/no-image.jpg'"
                            onerror="this.src='assets/images/no-image.jpg';"
                            (click)="viewImage(row.avatar ? (imagesFolder + 'Directories/' + row.id + row.avatar + '?t=' + this.timestamp) : 'assets/images/no-image.png')">
                    </span>
                </td>
            </ng-container>
            <ng-container matColumnDef="status">
                <th mat-header-cell class='table-header-column bg-primary text-on-primary' *matHeaderCellDef>
                    <p class='table-header-column bg-primary text-on-primary' mat-sort-header="status">Status</p>
                </th>
                <td mat-cell *matCellDef="let row" class="selectable" (click)="initUpsert(row)"> {{row.status}} </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns; sticky: true"></tr>
            <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
        </table>
    </div>
    <div
        class="flex items-end flex-row items-center border-t bg-primary text-on-primary dark:bg-gray-800 dark:text-primary justify-between pl-4 pr-4">
        <mat-paginator [pageSize]="10" [hidePageSize]="true"
            [disabled]="loading"
            class="bg-primary text-on-primary dark:bg-gray-800 dark:text-primary"></mat-paginator>
        <div class="flex items-center">
            <button mat-icon-button class="bg-primary w-7 h-7 min-w-7 min-h-7 -mt-1"
                (click)="initUpsert(null)">
                <ng-container *ngIf="!loading; else spinnerTemplate">
                    <mat-icon class="text-on-primary">add</mat-icon>
                </ng-container>
                <ng-template #spinnerTemplate>
                    <mat-spinner [diameter]="24" [color]="'primary'" class="text-on-primary"></mat-spinner>
                </ng-template>
            </button>
        </div>

    </div>
</div>

<ng-template #loadingTemplate>
    <div class="loading-template"></div>
</ng-template> -->

<div class="absolute inset-0 flex flex-col flex-auto min-w-0 bg-card dark:bg-gray-800"
    [style.margin-right]="showAdverts?'208px':'0px'">
    <div class="flex flex-auto items-center justify-between h-16 pr-3 sm:pr-5 pl-6 sm:pl-8 bg-primary text-on-primary">
        <div class="text-lg font-medium">My Directory Info</div>
    </div>
    <div
        class="flex flex-col flex-auto mat-typography bg-card dark:bg-gray-800 pl-0 pr-0 pt-4 pb-4 h-fit overflow-y-auto">
        <form *ngIf="form" class="flex flex-col flex-auto" name="form" [formGroup]="form" novalidate class="w-full">
            <mat-form-field fxFlex appearance="outline"
                [ngClass]="loading?'w-full sm:w-2/4 pl-2 pr-2 mat-form-field-loading':'w-full sm:w-2/4 pl-2 pr-2'">
                <mat-label>Category</mat-label>
                <mat-select placeholder="Category" formControlName="directoryCategoryId"
                    (selectionChange)="changeDirectoryCategory()">
                    <mat-option *ngFor="let directoryCategoryItem of directoryCategoryList | order_by:'description'"
                        [value]="directoryCategoryItem.id">{{directoryCategoryItem.description}}</mat-option>
                </mat-select>
                <mat-error>Category is required</mat-error>
            </mat-form-field>



            <mat-form-field fxFlex appearance="outline"
                [ngClass]="loading?'w-full sm:w-2/4 pl-2 pr-2 mat-form-field-loading':'w-full sm:w-2/4 pl-2 pr-2'">
                <mat-label>Company Name</mat-label><input matInput placeholder="Company Name"
                    formControlName="companyName" id="companyName">

                <mat-error *ngIf="hasError('companyName', 'required')">Company Name is required</mat-error>
            </mat-form-field>


            <mat-form-field fxFlex appearance="outline"
                [ngClass]="loading?'w-full sm:w-2/4 pl-2 pr-2 mat-form-field-loading':'w-full sm:w-2/4 pl-2 pr-2'">
                <mat-label>Description</mat-label><input matInput placeholder="Description"
                    formControlName="description" maxlength="500">

                <mat-error *ngIf="hasError('description', 'required')">Description is required</mat-error>
            </mat-form-field>


            <mat-form-field fxFlex appearance="outline"
                [ngClass]="loading?'w-full sm:w-2/4 pl-2 pr-2 mat-form-field-loading':'w-full sm:w-2/4 pl-2 pr-2'">
                <mat-label>Email</mat-label><input matInput placeholder="Email" formControlName="email" id="email">

                <mat-error *ngIf="hasError('email', 'required')">Email is required</mat-error>
            </mat-form-field>


            <mat-form-field fxFlex appearance="outline"
                [ngClass]="loading?'w-full sm:w-2/4 pl-2 pr-2 mat-form-field-loading':'w-full sm:w-2/4 pl-2 pr-2'">
                <mat-label>Phone</mat-label><input matInput placeholder="Phone" formControlName="phone" id="phone">

                <mat-error *ngIf="hasError('phone', 'required')">Phone is required</mat-error>
            </mat-form-field>


            <mat-form-field fxFlex appearance="outline"
                [ngClass]="loading?'w-full sm:w-2/4 pl-2 pr-2 mat-form-field-loading':'w-full sm:w-2/4 pl-2 pr-2'">
                <mat-label>Website</mat-label><input matInput placeholder="Website" formControlName="website"
                    id="website">

                <mat-error *ngIf="hasError('website', 'required')">Website is required</mat-error>
            </mat-form-field>


            <mat-form-field fxFlex appearance="outline"
                [ngClass]="loading?'w-full sm:w-2/4 pl-2 pr-2 mat-form-field-loading':'w-full sm:w-2/4 pl-2 pr-2'">
                <mat-label>Instagram Link</mat-label><input matInput placeholder="Instagram Link"
                    formControlName="instagram" id="instagram">

                <mat-error *ngIf="hasError('instagram', 'required')">Instagram Link is required</mat-error>
            </mat-form-field>


            <mat-form-field fxFlex appearance="outline"
                [ngClass]="loading?'w-full sm:w-2/4 pl-2 pr-2 mat-form-field-loading':'w-full sm:w-2/4 pl-2 pr-2'">
                <mat-label>Facebook Link</mat-label><input matInput placeholder="Facebook Link"
                    formControlName="facebook" id="facebook">
                <mat-error *ngIf="hasError('facebook', 'required')">Facebook Link is required</mat-error>
            </mat-form-field>


            <mat-form-field fxFlex appearance="outline"
                [ngClass]="loading?'w-full sm:w-2/4 pl-2 pr-2 mat-form-field-loading':'w-full sm:w-2/4 pl-2 pr-2'">
                <mat-label>Twitter Link</mat-label><input matInput placeholder="Twitter Link" formControlName="twitter"
                    id="twitter">
                <mat-error *ngIf="hasError('twitter', 'required')">Twitter Link is required</mat-error>
            </mat-form-field>




            <mat-form-field fxFlex appearance="outline"
                [ngClass]="loading?'w-full sm:w-2/4 pl-2 pr-2 mat-form-field-loading':'w-full sm:w-2/4 pl-2 pr-2'">
                <mat-label>Address</mat-label>
                <input matInput 
                    id="pac-input-address" 
                    formControlName="addressLabel" 
                    class="w-full h-full" 
                    type="text"
                    placeholder="Address"
                    (input)="onAddressInput($event)"
                    [matAutocomplete]="autoAddress">
                <mat-autocomplete #autoAddress="matAutocomplete" 
                    (optionSelected)="onAddressSelected($event.option.value)">
                    <mat-option *ngFor="let suggestion of addressSuggestions" [value]="suggestion.display_name">
                        {{ suggestion.display_name }}
                    </mat-option>
                </mat-autocomplete>
                <mat-error
                    *ngIf="hasError('addressLabel', 'required')||hasError('addressLat', 'required')||hasError('addressLon', 'required')">Address
                    is required
                </mat-error>
            </mat-form-field>


            <div class="w-full z-10 relative flex flex-col items-center">
                <img fxFlex class="cursor-pointer shadow-inner shadow-xl rounded-lg w-36"
                    onerror="this.src='assets/images/no-image.jpg';"
                    [src]="avatarChanged ? fileToUpload : form.value.avatar ? imagesFolder + 'Directories/' + form.value.id + form.value.avatar + '?t=' + this.timestamp : 'assets/images/no-image.png'"
                    alt="User avatar" (click)="uploadImage($event)" />
            </div>
        </form>
    </div>
    <div
        class="flex items-end flex-row h-12 items-center border-t bg-primary text-on-primary dark:bg-gray-800 dark:text-primary justify-between pl-4 pr-4">
        <div></div>
        <button mat-icon-button class="bg-primary w-7 h-7 min-w-7 min-h-7 -mt-1" (click)="save()">
            <ng-container *ngIf="!loading; else spinnerTemplate">
                <mat-icon class="text-on-primary">check</mat-icon>
            </ng-container>
            <ng-template #spinnerTemplate>
                <mat-spinner [diameter]="24" [color]="'primary'" class="text-on-primary"></mat-spinner>
            </ng-template>
        </button>
    </div>
</div>

<ng-template #loadingTemplate>
    <div class="loading-template"></div>
</ng-template>
