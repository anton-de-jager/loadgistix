"use strict";(self.webpackChunkloadgistix=self.webpackChunkloadgistix||[]).push([[364],{1708:(w,b,n)=>{n.d(b,{I:()=>d});var C=n(7445),s=n(2340),t=n(5e3),v=n(8279),Z=n(7261),f=n(6407),y=n(8951),N=n(4521),E=n(9808),D=n(9224);function e(u,_){if(1&u&&t._UZ(0,"img",7),2&u){const p=t.oxw().$implicit,h=t.oxw(2);t.Q6J("src",h.imagesFolder+"Adverts/"+p.id+p.avatar+"?t="+h.timestamp(),t.LSH)}}function S(u,_){if(1&u&&(t.TgZ(0,"mat-card",3),t.TgZ(1,"mat-card-title-group"),t.TgZ(2,"mat-card-title",4),t._uU(3),t.qZA(),t.TgZ(4,"mat-card-subtitle"),t._uU(5),t.qZA(),t.YNc(6,e,1,1,"img",5),t.qZA(),t.TgZ(7,"mat-card-content"),t._uU(8),t._UZ(9,"br"),t._UZ(10,"br"),t.TgZ(11,"a",6),t._uU(12),t.qZA(),t.qZA(),t.qZA()),2&u){const p=_.$implicit;t.xp6(3),t.Oqu(p.title),t.xp6(2),t.Oqu(p.subTitle),t.xp6(1),t.Q6J("ngIf",p.avatar),t.xp6(2),t.hij(" ",p.content,""),t.xp6(3),t.Q6J("href",p.link,t.LSH),t.xp6(1),t.Oqu(p.link)}}function g(u,_){if(1&u&&(t.ynx(0),t.YNc(1,S,13,6,"mat-card",2),t.BQk()),2&u){const p=t.oxw();t.xp6(1),t.Q6J("ngForOf",p.advertItems)}}function T(u,_){1&u&&(t.TgZ(0,"mat-card",3),t.TgZ(1,"mat-card-title-group"),t.TgZ(2,"mat-card-title",4),t._uU(3,"Loadgistix"),t.qZA(),t.TgZ(4,"mat-card-subtitle"),t._uU(5,"Get more"),t.qZA(),t._UZ(6,"img",8),t.qZA(),t.TgZ(7,"mat-card-content"),t._uU(8," Contact us today - we will show you how to get the best out of Loadgistix! "),t.qZA(),t.qZA())}let d=(()=>{class u{constructor(p,h,x,I,O){this.apiService=p,this._snackBar=h,this.variableService=x,this.authService=I,this._router=O,this.imagesFolder=s.N.api+"Images/",this.loading=!0,this.advertItems=[]}ngOnInit(){this.getAdverts().then(h=>{this.advertItems=h});const p=(0,C.F)(6e5);this.subscription=p.subscribe(h=>{this.authService.check().subscribe(x=>{x&&this.getAdverts().then(I=>{this.advertItems=I})})})}timestamp(){return(new Date).getTime()}getAdverts(){return new Promise(h=>{try{this.apiService.post("adverts","available",null).subscribe({next:x=>{1==x.result?h(x.data):"Expired"==x.message?this._router.navigate(["/sign-out"]):this._snackBar.open("Error: "+x.message,null,{duration:2e3})},error:x=>{console.log(x),this._snackBar.open("Error: "+x,null,{duration:2e3})},complete:()=>{}})}catch(x){h([])}})}}return u.\u0275fac=function(p){return new(p||u)(t.Y36(v.s),t.Y36(Z.ux),t.Y36(f.S),t.Y36(y.e),t.Y36(N.F0))},u.\u0275cmp=t.Xpm({type:u,selectors:[["advert"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden","style","margin-bottom: 12px;",4,"ngIf"],["class","flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden","style","margin-bottom: 12px;",4,"ngFor","ngForOf"],[1,"flex","flex-col","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden",2,"margin-bottom","12px"],[2,"font-size","18px"],["mat-card-sm-image","",3,"src",4,"ngIf"],["target","_blank",3,"href"],["mat-card-sm-image","",3,"src"],["mat-card-sm-image","","src","assets/images/no-image.jpg"]],template:function(p,h){1&p&&(t.YNc(0,g,2,1,"ng-container",0),t.YNc(1,T,9,0,"mat-card",1)),2&p&&(t.Q6J("ngIf",h.advertItems.length>0),t.xp6(1),t.Q6J("ngIf",0===h.advertItems.length))},directives:[E.O5,E.sg,D.a8,D.C1,D.n5,D.$j,D.dn,D.vP],styles:[".mat-card-sm-image[_ngcontent-%COMP%]{max-width:120px;max-height:120px;width:auto;height:auto}"]}),u})()},7738:(w,b,n)=>{n.d(b,{_:()=>S});var C=n(7295),s=n(7579),t=n(5e3),v=n(8966),Z=n(9808),f=n(7423);function y(g,T){if(1&g){const d=t.EpF();t.TgZ(0,"webcam",11),t.NdJ("imageCapture",function(_){return t.CHM(d),t.oxw(2).handleImage(_)}),t.qZA()}if(2&g){const d=t.oxw(2);t.Q6J("height",500)("width",1e3)("trigger",d.triggerObservable)("switchCamera",d.nextWebcamObservable)}}function N(g,T){if(1&g&&(t.TgZ(0,"ul"),t.TgZ(1,"li"),t._uU(2),t.ALo(3,"json"),t.qZA(),t.qZA()),2&g){const d=T.$implicit;t.xp6(2),t.Oqu(t.lcZ(3,1,d))}}function E(g,T){if(1&g&&(t.TgZ(0,"div"),t.TgZ(1,"h4"),t._uU(2,"Error Messages:"),t.qZA(),t.YNc(3,N,4,3,"ul",12),t.qZA()),2&g){const d=t.oxw(2);t.xp6(3),t.Q6J("ngForOf",d.errors)}}function D(g,T){if(1&g&&(t.TgZ(0,"div"),t.TgZ(1,"div",8),t.YNc(2,y,1,4,"webcam",9),t.qZA(),t.YNc(3,E,4,1,"div",10),t.qZA()),2&g){const d=t.oxw();t.xp6(2),t.Q6J("ngIf",d.showWebcam),t.xp6(1),t.Q6J("ngIf",d.errors.length>0)}}function e(g,T){1&g&&t._uU(0," Camera device not available ")}let S=(()=>{class g{constructor(d){this.dialogRef=d,this.showWebcam=!0,this.isCameraExist=!0,this.errors=[],this.trigger=new s.x,this.nextWebcam=new s.x}ngOnInit(){C.BF.getAvailableVideoInputs().then(d=>{this.isCameraExist=d&&d.length>0})}takeSnapshot(){this.trigger.next()}onOffWebCame(){this.showWebcam=!this.showWebcam}handleInitError(d){this.errors.push(d)}changeWebCame(d){this.nextWebcam.next(d)}handleImage(d){this.dialogRef.close(d)}get triggerObservable(){return this.trigger.asObservable()}get nextWebcamObservable(){return this.nextWebcam.asObservable()}cancel(){this.dialogRef.close(null)}}return g.\u0275fac=function(d){return new(d||g)(t.Y36(v.so))},g.\u0275cmp=t.Xpm({type:g,selectors:[["app-camera"]],decls:12,vars:2,consts:[["mat-dialog-title","",1,"accent","dialog-title","bg-primary","text-on-primary","text-secondary",2,"margin-bottom","0px !important"],["mat-dialog-content","",2,"padding","0!important"],[4,"ngIf","ngIfElse"],["noCameraExist",""],["mat-dialog-actions","",1,"dialog-footer",2,"margin-top","0px !important"],[2,"flex","1 1 auto"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"click"],[2,"text-align","center"],[3,"height","width","trigger","switchCamera","imageCapture",4,"ngIf"],[4,"ngIf"],[3,"height","width","trigger","switchCamera","imageCapture"],[4,"ngFor","ngForOf"]],template:function(d,u){if(1&d&&(t.TgZ(0,"h1",0),t._uU(1,"Take Photo"),t.qZA(),t.TgZ(2,"div",1),t.YNc(3,D,4,2,"div",2),t.YNc(4,e,1,0,"ng-template",null,3,t.W1O),t.qZA(),t.TgZ(6,"div",4),t._UZ(7,"span",5),t.TgZ(8,"button",6),t.NdJ("click",function(){return u.cancel()}),t._uU(9,"Cancel"),t.qZA(),t.TgZ(10,"button",7),t.NdJ("click",function(){return u.takeSnapshot()}),t._uU(11,"Take Photo"),t.qZA(),t.qZA()),2&d){const _=t.MAs(5);t.xp6(3),t.Q6J("ngIf",u.isCameraExist)("ngIfElse",_)}},directives:[v.uh,v.xY,Z.O5,v.H8,f.lW,C.i3,Z.sg],pipes:[Z.Ts],styles:[".button[_ngcontent-%COMP%]{color:#fff;background-color:#00f;padding:4px;text-align:center;text-decoration:none;display:inline-block;font-size:16px;margin:4px 2px;transition-duration:.4s;cursor:pointer;border-radius:2px}ul.links[_ngcontent-%COMP%]{padding-bottom:10px}"]}),g})()},3364:(w,b,n)=>{n.r(b),n.d(b,{DriversModule:()=>Se});var C=n(4521),s=n(3075),t=n(8966),v=n(6087),Z=n(4847),f=n(4999),y=n(3098),N=n(7579),E=n(7738),D=n(2340),e=n(5e3),S=n(7261),g=n(8279),T=n(2313),d=n(7093),u=n(7322),_=n(7531),p=n(9808),h=n(6856),x=n(4107),I=n(7423),O=n(508);function Y(a,o){1&a&&(e.TgZ(0,"mat-error"),e._uU(1,"First Name is required"),e.qZA())}function L(a,o){1&a&&(e.TgZ(0,"mat-error"),e._uU(1,"Last Name is required"),e.qZA())}function B(a,o){1&a&&(e.TgZ(0,"mat-error"),e._uU(1,"ID Number is required"),e.qZA())}function k(a,o){1&a&&(e.TgZ(0,"mat-error"),e._uU(1,"Phone is required"),e.qZA())}function M(a,o){1&a&&(e.TgZ(0,"mat-error"),e._uU(1,"Email is required"),e.qZA())}function F(a,o){if(1&a&&(e.TgZ(0,"mat-option",33),e._uU(1),e.qZA()),2&a){const i=o.$implicit;e.Q6J("value",i.id),e.xp6(1),e.Oqu(i.code)}}function J(a,o){if(1&a){const i=e.EpF();e.TgZ(0,"img",34),e.NdJ("click",function(){return e.CHM(i),e.oxw(),e.MAs(71).click()}),e.qZA()}if(2&a){const i=e.oxw();e.Q6J("src",i.previewImage,e.LSH)}}function P(a,o){if(1&a){const i=e.EpF();e.TgZ(0,"img",34),e.NdJ("click",function(){return e.CHM(i),e.oxw(),e.MAs(71).click()}),e.qZA()}if(2&a){const i=e.oxw();e.Q6J("src",i.imagesFolder+"Drivers/"+i.form.value.id+i.form.value.avatar+"?t="+i.timestamp(),e.LSH)}}function Q(a,o){if(1&a){const i=e.EpF();e.TgZ(0,"img",35),e.NdJ("click",function(){return e.CHM(i),e.oxw(),e.MAs(71).click()}),e.qZA()}}let W=(()=>{class a{constructor(i,r,l,c,m,A){this.dialog=i,this.dialogRef=r,this.data=l,this._snackBar=c,this.apiService=m,this.sanitizer=A,this.imagesFolder=D.N.api+"Images/",this.previewImage=null,this.hasError=(U,q)=>this.form.controls[U].hasError(q),this.formErrors=l.formErrors,this.formData=l,this._unsubscribeAll=new N.x}ngOnInit(){this.form=this.data.form,this.formValid=!1}handleFileInput(i){this.fileToUpload=i.item(0),this.form.controls.fileToUpload.setValue(this.fileToUpload);var r=(this.fileToUpload.size/1048576).toFixed(2);if(Number(r)>Number(.25))return this._snackBar.open("Error: Maximum FileSize is 200kB",null,{duration:2e3}),!1;{let l=new FileReader;l.onload=c=>{this.previewImage=c.target.result},l.readAsDataURL(this.fileToUpload)}}initCamera(){const i=new t.vA;i.autoFocus=!0,i.disableClose=!0,i.hasBackdrop=!0,i.ariaLabel="fffff",i.width="800px",this.dialog.open(E._,i).afterClosed().subscribe(l=>{l&&(this.form.controls.avatar.setValue(l._imageAsDataUrl),this.previewImage=l._imageAsDataUrl,this.form.controls.avatarChanged.setValue(!0))})}timestamp(){return(new Date).getTime()}onNoClick(){this.dialogRef.close(!1)}onYesClick(){setTimeout(()=>{this.dialogRef.close(this.form.value)},100)}}return a.\u0275fac=function(i){return new(i||a)(e.Y36(t.uw),e.Y36(t.so),e.Y36(t.WI),e.Y36(S.ux),e.Y36(g.s),e.Y36(T.H7))},a.\u0275cmp=e.Xpm({type:a,selectors:[["dialog-driver"]],decls:86,vars:16,consts:[["mat-dialog-title","",1,"accent","dialog-title","bg-primary","text-on-primary","text-secondary"],["mat-dialog-content","","fxLayout","column"],["fxLayout","column","fxLayoutAlign","start","fxFlex","1 0 auto","name","form","novalidate","",1,"mat-white-bg","w-100-p",2,"padding","0px!important",3,"formGroup"],["fxLayout","row wrap",1,"w-100-p"],["fxFlex","100","fxFlex.gt-xs","50",1,"p-4",2,"padding","0px!important"],["appearance","outline",1,"w-100-p"],["matInput","","placeholder","FirstName","formControlName","firstName","id","description"],[4,"ngIf"],["matInput","","placeholder","LastName","formControlName","lastName","id","description"],["matInput","","placeholder","IdNumber","formControlName","idNumber","id","description"],["matInput","","placeholder","Phone","formControlName","phone","id","description"],["matInput","","placeholder","Email","formControlName","email","id","email"],["matInput","","placeholder","Password","formControlName","password","id","password"],["matInput","","readonly","","formControlName","dateOfBirth",3,"matDatepicker"],["matSuffix","",3,"for"],["picker_dateOfBirth",""],["placeholder","LicenceTypeId","formControlName","licenceTypeId"],[3,"value",4,"ngFor","ngForOf"],["matInput","","readonly","","formControlName","licenceExpiryDate",3,"matDatepicker"],["picker_licenceExpiryDate",""],["fxFlex","100","fxLayout","row","fxLayoutAlign","center center",1,"p-4"],["id","fileInput","type","file","accept",".jpg,.png,.jpeg",2,"display","none",3,"change"],["Image",""],["fxFlex","","fxLayout","column"],["fxFlex","","fxLayout","row"],["mat-flat-button","","fxFlex","100","color","primary",2,"margin-left","2px","margin-right","2px",3,"click"],["fxFlex","","fxLayout","row","fxLayoutAlign","center center",2,"margin-top","4px"],["style","max-width: 120px;max-height: 120px;width: auto;height: auto;","class","image",3,"src","click",4,"ngIf"],["style","max-width: 120px;max-height: 120px;width: auto;height: auto;","src","assets/images/no-image.jpg","class","image",3,"click",4,"ngIf"],["mat-dialog-actions","",1,"dialog-footer"],[2,"flex","1 1 auto"],["mat-flat-button","","color","warn",3,"click"],["mat-flat-button","","color","primary",3,"disabled","click"],[3,"value"],[1,"image",2,"max-width","120px","max-height","120px","width","auto","height","auto",3,"src","click"],["src","assets/images/no-image.jpg",1,"image",2,"max-width","120px","max-height","120px","width","auto","height","auto",3,"click"]],template:function(i,r){if(1&i){const l=e.EpF();e.TgZ(0,"h1",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1),e.TgZ(3,"form",2),e.TgZ(4,"div",3),e.TgZ(5,"div",4),e.TgZ(6,"mat-form-field",5),e.TgZ(7,"mat-label"),e._uU(8,"First Name"),e.qZA(),e._UZ(9,"input",6),e.YNc(10,Y,2,0,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(11,"div",4),e.TgZ(12,"mat-form-field",5),e.TgZ(13,"mat-label"),e._uU(14,"Last Name"),e.qZA(),e._UZ(15,"input",8),e.YNc(16,L,2,0,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(17,"div",4),e.TgZ(18,"mat-form-field",5),e.TgZ(19,"mat-label"),e._uU(20,"ID Number"),e.qZA(),e._UZ(21,"input",9),e.YNc(22,B,2,0,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(23,"div",4),e.TgZ(24,"mat-form-field",5),e.TgZ(25,"mat-label"),e._uU(26,"Phone"),e.qZA(),e._UZ(27,"input",10),e.YNc(28,k,2,0,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(29,"div",4),e.TgZ(30,"mat-form-field",5),e.TgZ(31,"mat-label"),e._uU(32,"Email"),e.qZA(),e._UZ(33,"input",11),e.YNc(34,M,2,0,"mat-error",7),e.qZA(),e.qZA(),e.TgZ(35,"div",4),e.TgZ(36,"mat-form-field",5),e.TgZ(37,"mat-label"),e._uU(38,"Password"),e.qZA(),e._UZ(39,"input",12),e.qZA(),e.qZA(),e.TgZ(40,"div",4),e.TgZ(41,"mat-form-field",5),e.TgZ(42,"mat-label"),e._uU(43,"Date Of Birth"),e.qZA(),e._UZ(44,"input",13),e._UZ(45,"mat-datepicker-toggle",14),e._UZ(46,"mat-datepicker",null,15),e.TgZ(48,"mat-error"),e._uU(49,"Date Of Birth is required"),e.qZA(),e.qZA(),e.qZA(),e._UZ(50,"div",4),e.TgZ(51,"div",4),e.TgZ(52,"mat-form-field",5),e.TgZ(53,"mat-label"),e._uU(54,"Licence Type"),e.qZA(),e.TgZ(55,"mat-select",16),e.YNc(56,F,2,2,"mat-option",17),e.qZA(),e.TgZ(57,"mat-error"),e._uU(58,"Licence Type is required"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(59,"div",4),e.TgZ(60,"mat-form-field",5),e.TgZ(61,"mat-label"),e._uU(62,"Licence Expiry Date"),e.qZA(),e._UZ(63,"input",18),e._UZ(64,"mat-datepicker-toggle",14),e._UZ(65,"mat-datepicker",null,19),e.TgZ(67,"mat-error"),e._uU(68,"Licence Expiry Date is required"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(69,"div",20),e.TgZ(70,"input",21,22),e.NdJ("change",function(m){return r.handleFileInput(m.target.files)}),e.qZA(),e.TgZ(72,"div",23),e.TgZ(73,"div",24),e.TgZ(74,"button",25),e.NdJ("click",function(){return e.CHM(l),e.MAs(71).click()}),e._uU(75,"Upload Image"),e.qZA(),e.qZA(),e.TgZ(76,"div",26),e.YNc(77,J,1,1,"img",27),e.YNc(78,P,1,1,"img",27),e.YNc(79,Q,1,0,"img",28),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(80,"div",29),e._UZ(81,"span",30),e.TgZ(82,"button",31),e.NdJ("click",function(){return r.onNoClick()}),e._uU(83,"Cancel"),e.qZA(),e.TgZ(84,"button",32),e.NdJ("click",function(){return r.onYesClick()}),e._uU(85,"Submit"),e.qZA(),e.qZA()}if(2&i){const l=e.MAs(47),c=e.MAs(66);e.xp6(1),e.hij("",r.formData.title," Driver"),e.xp6(2),e.Q6J("formGroup",r.form),e.xp6(7),e.Q6J("ngIf",r.hasError("firstName","required")),e.xp6(6),e.Q6J("ngIf",r.hasError("lastName","required")),e.xp6(6),e.Q6J("ngIf",r.hasError("idNumber","required")),e.xp6(6),e.Q6J("ngIf",r.hasError("phone","required")),e.xp6(6),e.Q6J("ngIf",r.hasError("email","required")),e.xp6(10),e.Q6J("matDatepicker",l),e.xp6(1),e.Q6J("for",l),e.xp6(11),e.Q6J("ngForOf",r.formData.licenceTypeList),e.xp6(7),e.Q6J("matDatepicker",c),e.xp6(1),e.Q6J("for",c),e.xp6(13),e.Q6J("ngIf",r.previewImage),e.xp6(1),e.Q6J("ngIf",!r.previewImage&&r.form.value.avatar),e.xp6(1),e.Q6J("ngIf",!r.previewImage&&!r.form.value.avatar),e.xp6(5),e.Q6J("disabled",!r.form.valid)}},directives:[t.uh,t.xY,d.xw,s._Y,s.JL,d.Wh,d.yH,s.sg,u.KE,u.hX,_.Nt,s.Fj,s.JJ,s.u,p.O5,h.hl,h.nW,u.R9,h.Mq,u.TO,x.gD,p.sg,I.lW,t.H8,O.ey],encapsulation:2}),a})();var j=n(520),H=n(6407),R=n(6362),$=n(1683),z=n(9224),K=n(1708),G=n(7238),X=n(5245);function V(a,o){if(1&a){const i=e.EpF();e.TgZ(0,"th",27),e.TgZ(1,"button",28),e.NdJ("click",function(){return e.CHM(i),e.oxw().initUpsert(null)}),e.TgZ(2,"mat-icon",29),e._uU(3,"add"),e.qZA(),e.qZA(),e.qZA()}if(2&a){const i=e.oxw();e.xp6(1),e.Q6J("disabled",i.loading)}}function ee(a,o){if(1&a){const i=e.EpF();e.TgZ(0,"td",30),e.TgZ(1,"button",31),e.NdJ("click",function(){const c=e.CHM(i).$implicit;return e.oxw().initUpsert(c)}),e.TgZ(2,"mat-icon",29),e._uU(3,"edit"),e.qZA(),e.qZA(),e.TgZ(4,"button",32),e.NdJ("click",function(){const c=e.CHM(i).$implicit;return e.oxw().initDelete(c.id)}),e.TgZ(5,"mat-icon",29),e._uU(6,"delete"),e.qZA(),e.qZA(),e.qZA()}if(2&a){const i=e.oxw();e.xp6(1),e.Q6J("disabled",i.loading),e.xp6(3),e.Q6J("disabled",i.loading)}}function te(a,o){1&a&&(e.TgZ(0,"th",33),e.TgZ(1,"p",34),e._uU(2,"UserId"),e.qZA(),e.qZA())}function ie(a,o){if(1&a&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&a){const i=o.$implicit;e.xp6(1),e.hij(" ",i.userDescription," ")}}function ae(a,o){1&a&&(e.TgZ(0,"th",33),e.TgZ(1,"p",36),e._uU(2,"First Name"),e.qZA(),e.qZA())}function re(a,o){if(1&a&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&a){const i=o.$implicit;e.xp6(1),e.hij(" ",i.firstName," ")}}function ne(a,o){1&a&&(e.TgZ(0,"th",33),e.TgZ(1,"p",37),e._uU(2,"Last Name"),e.qZA(),e.qZA())}function oe(a,o){if(1&a&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&a){const i=o.$implicit;e.xp6(1),e.hij(" ",i.lastName," ")}}function le(a,o){1&a&&(e.TgZ(0,"th",33),e.TgZ(1,"p",38),e._uU(2,"Phone"),e.qZA(),e.qZA())}function se(a,o){if(1&a&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&a){const i=o.$implicit;e.xp6(1),e.hij(" ",i.phone," ")}}function ce(a,o){1&a&&(e.TgZ(0,"th",33),e.TgZ(1,"p",39),e._uU(2,"Email"),e.qZA(),e.qZA())}function me(a,o){if(1&a&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&a){const i=o.$implicit;e.xp6(1),e.hij(" ",i.email," ")}}function de(a,o){1&a&&(e.TgZ(0,"th",33),e.TgZ(1,"p",40),e._uU(2,"ID Number"),e.qZA(),e.qZA())}function pe(a,o){if(1&a&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&a){const i=o.$implicit;e.xp6(1),e.hij(" ",i.idNumber," ")}}function ue(a,o){1&a&&(e.TgZ(0,"th",33),e.TgZ(1,"p",41),e._uU(2,"Date Of Birth"),e.qZA(),e.qZA())}function ge(a,o){if(1&a&&(e.TgZ(0,"td",35),e._uU(1),e.ALo(2,"date"),e.qZA()),2&a){const i=o.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,i.dateOfBirth)," ")}}function fe(a,o){1&a&&(e.TgZ(0,"th",33),e.TgZ(1,"p",42),e._uU(2,"Licence Type"),e.qZA(),e.qZA())}function he(a,o){if(1&a&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&a){const i=o.$implicit;e.xp6(1),e.hij(" ",i.licenceType?i.licenceType.code:""," ")}}function _e(a,o){1&a&&(e.TgZ(0,"th",33),e.TgZ(1,"p",43),e._uU(2,"Licence Expiry Date"),e.qZA(),e.qZA())}function ve(a,o){if(1&a&&(e.TgZ(0,"td",35),e._uU(1),e.ALo(2,"date"),e.qZA()),2&a){const i=o.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,i.licenceExpiryDate)," ")}}function xe(a,o){1&a&&(e.TgZ(0,"th",33),e.TgZ(1,"p",44),e._uU(2,"Photo"),e.qZA(),e.qZA())}function Ze(a,o){if(1&a&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&a){const i=o.$implicit;e.xp6(1),e.hij(" ",i.avatar," ")}}function Te(a,o){1&a&&(e.TgZ(0,"th",33),e.TgZ(1,"p",45),e._uU(2,"Status"),e.qZA(),e.qZA())}function De(a,o){if(1&a&&(e.TgZ(0,"td",35),e._uU(1),e.qZA()),2&a){const i=o.$implicit;e.xp6(1),e.hij(" ",i.status.description," ")}}function Ce(a,o){1&a&&e._UZ(0,"tr",46)}function Ae(a,o){1&a&&e._UZ(0,"tr",47)}const be=function(){return[5,10,25,100]};let Ue=(()=>{class a{constructor(i,r,l,c,m,A,U,q){this.dialog=i,this._formBuilder=r,this.apiService=l,this._snackBar=c,this.variableService=m,this._router=A,this.fuseSplashScreenService=U,this.fuseConfirmationService=q,this.licenceTypeList=[],this.driverList=[],this.fuseSplashScreenService.show(),this.loading=!0,this.displayedColumns=["cud","firstName","lastName","licenceTypeDescription"]}ngOnInit(){this.getLicenceTypes().then(i=>{this.licenceTypeList=i,this.getDrivers().then(r=>{this.variableService.setPageSelected("Drivers"),this.driverList=r,this.dataSource=new f.by(this.driverList),this.fuseSplashScreenService.hide(),this.loading=!1})})}getDrivers(){return new Promise(r=>{try{this.apiService.get("drivers").subscribe({next:l=>{1==l.result?r(l.data):"Expired"==l.message?this._router.navigate(["/sign-out"]):(this._snackBar.open("Error: "+l.message,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1)},error:l=>{console.log(l),this._snackBar.open("Error: "+l,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1},complete:()=>{}})}catch(l){r([])}})}getLicenceTypes(){return new Promise(r=>{try{this.apiService.get("licenceTypes").subscribe({next:l=>{1==l.result?r(l.data):"Expired"==l.message?this._router.navigate(["/sign-out"]):(this._snackBar.open("Error: "+l.message,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1)},error:l=>{console.log(l),this._snackBar.open("Error: "+l,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1},complete:()=>{}})}catch(l){r([])}})}initUpsert(i){this.form=this._formBuilder.group({id:[null==i?y.i.create().toString():i.id],userId:[null==i?localStorage.getItem("userId"):i.userId],firstName:[null==i?null:i.firstName,s.kI.required],lastName:[null==i?null:i.lastName,s.kI.required],phone:[null==i?null:i.phone,s.kI.required],email:[null==i?null:i.email,s.kI.required],password:[null],idNumber:[null==i?null:i.idNumber,s.kI.required],dateOfBirth:[null==i?null:i.dateOfBirth,s.kI.required],licenceTypeId:[null==i?null:i.licenceTypeId,s.kI.required],licenceExpiryDate:[null==i?null:i.licenceExpiryDate,s.kI.required],avatar:[null==i?null:i.avatar],avatarChanged:[!1],fileToUpload:[null],statusId:[null==i?y.i.parse("50000F55-C3B0-4D92-BCFD-3203F5FD35B8").toString():i.statusId]});const r=new t.vA;r.data={item:i,form:this.form,licenceTypeList:this.licenceTypeList,title:null==i?"Insert":"Update"},r.autoFocus=!0,r.disableClose=!0,r.hasBackdrop=!0,r.ariaLabel="fffff",r.width="800px",this.dialog.open(W,r).afterClosed().subscribe(c=>{!1!==c&&(this.fuseSplashScreenService.show(),this.loading=!0,null==i?this.apiService.post("drivers",null,c).subscribe({next:m=>{1==m.result?"00000000-0000-0000-0000-000000000000"!=m.id&&c.fileToUpload?this.uploadFile(c.fileToUpload,m.id+"."+c.fileToUpload.name.split(".").pop()).then(A=>{m.data.avatar="."+c.fileToUpload.name.split(".").pop(),this.driverList.push(m.data),this.dataSource=new f.by(this.driverList),this.fuseSplashScreenService.hide(),this.loading=!1}):(this.driverList.push(m.data),this.dataSource=new f.by(this.driverList),this.fuseSplashScreenService.hide(),this.loading=!1):"Expired"==m.message?this._router.navigate(["/sign-out"]):(this._snackBar.open("Error: "+m.message,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1)},error:m=>{console.log(m),this._snackBar.open("Error: "+m,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1},complete:()=>{}}):this.apiService.put("drivers",c).subscribe({next:m=>{if(1==m.result)if("00000000-0000-0000-0000-000000000000"!=m.id&&c.fileToUpload)this.uploadFile(c.fileToUpload,m.id+"."+c.fileToUpload.name.split(".").pop()).then(A=>{m.data.avatar="."+c.fileToUpload.name.split(".").pop();let U=this.driverList.findIndex(q=>q.id===i.id);this.driverList[U]=m.data,this.dataSource=new f.by(this.driverList),this.fuseSplashScreenService.hide(),this.loading=!1});else{let A=this.driverList.findIndex(U=>U.id===i.id);this.driverList[A]=m.data,this.dataSource=new f.by(this.driverList),this.fuseSplashScreenService.hide(),this.loading=!1}else"Expired"==m.message?this._router.navigate(["/sign-out"]):(this._snackBar.open("Error: "+m.message,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1)},error:m=>{console.log(m),this._snackBar.open("Error: "+m,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1},complete:()=>{}}))})}initDelete(i){this.deleteForm=this._formBuilder.group({title:"Delete Driver",message:"Are you sure you want to remove this Driver",icon:this._formBuilder.group({show:!0,name:"heroicons_outline:exclamation",color:"warn"}),actions:this._formBuilder.group({confirm:this._formBuilder.group({show:!0,label:"Remove",color:"warn"}),cancel:this._formBuilder.group({show:!0,label:"Cancel"})}),dismissible:!0}),this.fuseConfirmationService.open(this.deleteForm.value).afterClosed().subscribe(l=>{"confirmed"===l&&(this.fuseSplashScreenService.show(),this.loading=!0,this.apiService.delete("drivers",i).subscribe({next:c=>{1==c.result?(this.driverList.splice(this.driverList.findIndex(m=>m.id===c.id),1),this.dataSource=new f.by(this.driverList),this.fuseSplashScreenService.hide(),this.loading=!1):"Expired"==c.message?this._router.navigate(["/sign-out"]):(this._snackBar.open("Error: "+c.message,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1)},error:c=>{console.log(c),this._snackBar.open("Error: "+c,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1},complete:()=>{}}))})}uploadFile(i,r){return new Promise(c=>{try{const m=new FormData;m.append("file",i),this.apiService.upload("drivers",m,r).subscribe(A=>{A.type===j.dt.Response&&c(!0)})}catch(m){c(!1)}})}getAddressSubstring(i,r){let l=i.split(r);return l.length>1?l[0]+","+l[1]:i}}return a.\u0275fac=function(i){return new(i||a)(e.Y36(t.uw),e.Y36(s.qu),e.Y36(g.s),e.Y36(S.ux),e.Y36(H.S),e.Y36(C.F0),e.Y36(R.j),e.Y36($.R))},a.\u0275cmp=e.Xpm({type:a,selectors:[["drivers"]],viewQuery:function(i,r){if(1&i&&(e.Gf(v.NW,5),e.Gf(Z.YE,5)),2&i){let l;e.iGM(l=e.CRH())&&(r.paginatorDriver=l.first),e.iGM(l=e.CRH())&&(r.sortDriver=l.first)}},decls:48,vars:8,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],["fusePerfectScrollbar","",1,"page-layout","blank","p-4"],[1,"grid","grid-cols-1","sm:grid-cols-6","gap-6","w-full","min-w-0"],[1,"sm:col-span-4","lg:col-span-4","flex","flex-col","flex-auto","p-6","overflow-hidden",2,"padding","0!important"],[1,"table-container","bg-card","shadow","rounded-2xl"],[1,"mat-elevation-z5",2,"padding","4px!important"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","cud"],["mat-header-cell","","class","cudColumnExtra ml-0 pl-12","style","padding-left: 0px!important;",4,"matHeaderCellDef"],["mat-cell","","class","cudColumnExtra ml-0 pl-12","style","padding-left: 0px!important;",4,"matCellDef"],["matColumnDef","userDescription"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","table-cell",4,"matCellDef"],["matColumnDef","firstName"],["matColumnDef","lastName"],["matColumnDef","phone"],["matColumnDef","email"],["matColumnDef","idNumber"],["matColumnDef","dateOfBirth"],["matColumnDef","licenceTypeDescription"],["matColumnDef","licenceExpiryDate"],["matColumnDef","avatar"],["matColumnDef","statusDescription"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions","pageSize","disabled"],[1,"sm:col-span-2","lg:col-span-2","flex","flex-col","flex-auto","p-6","overflow-hidden",2,"padding","0!important"],["mat-header-cell","",1,"cudColumnExtra","ml-0","pl-12",2,"padding-left","0px!important"],["mat-icon-button","","color","default","matTooltip","Add Driver",3,"disabled","click"],[1,"fab-icon"],["mat-cell","",1,"cudColumnExtra","ml-0","pl-12",2,"padding-left","0px!important"],["mat-icon-button","","color","default","matTooltip","Update Driver",3,"disabled","click"],["mat-icon-button","","color","default","matTooltip","Remove Driver",3,"disabled","click"],["mat-header-cell",""],["mat-sort-header","userDescription",1,"table-header"],["mat-cell","",1,"table-cell"],["mat-sort-header","firstName",1,"table-header"],["mat-sort-header","lastName",1,"table-header"],["mat-sort-header","phone",1,"table-header"],["mat-sort-header","email",1,"table-header"],["mat-sort-header","idNumber",1,"table-header"],["mat-sort-header","dateOfBirth",1,"table-header"],["mat-sort-header","licenceTypeDescription",1,"table-header"],["mat-sort-header","licenceExpiryDate",1,"table-header"],["mat-sort-header","avatar",1,"table-header"],["mat-sort-header","statusDescription",1,"table-header"],["mat-header-row",""],["mat-row",""]],template:function(i,r){1&i&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"mat-card",5),e.TgZ(6,"table",6),e.ynx(7,7),e.YNc(8,V,4,1,"th",8),e.YNc(9,ee,7,2,"td",9),e.BQk(),e.ynx(10,10),e.YNc(11,te,3,0,"th",11),e.YNc(12,ie,2,1,"td",12),e.BQk(),e.ynx(13,13),e.YNc(14,ae,3,0,"th",11),e.YNc(15,re,2,1,"td",12),e.BQk(),e.ynx(16,14),e.YNc(17,ne,3,0,"th",11),e.YNc(18,oe,2,1,"td",12),e.BQk(),e.ynx(19,15),e.YNc(20,le,3,0,"th",11),e.YNc(21,se,2,1,"td",12),e.BQk(),e.ynx(22,16),e.YNc(23,ce,3,0,"th",11),e.YNc(24,me,2,1,"td",12),e.BQk(),e.ynx(25,17),e.YNc(26,de,3,0,"th",11),e.YNc(27,pe,2,1,"td",12),e.BQk(),e.ynx(28,18),e.YNc(29,ue,3,0,"th",11),e.YNc(30,ge,3,3,"td",12),e.BQk(),e.ynx(31,19),e.YNc(32,fe,3,0,"th",11),e.YNc(33,he,2,1,"td",12),e.BQk(),e.ynx(34,20),e.YNc(35,_e,3,0,"th",11),e.YNc(36,ve,3,3,"td",12),e.BQk(),e.ynx(37,21),e.YNc(38,xe,3,0,"th",11),e.YNc(39,Ze,2,1,"td",12),e.BQk(),e.ynx(40,22),e.YNc(41,Te,3,0,"th",11),e.YNc(42,De,2,1,"td",12),e.BQk(),e.YNc(43,Ce,1,0,"tr",23),e.YNc(44,Ae,1,0,"tr",24),e.qZA(),e._UZ(45,"mat-paginator",25),e.qZA(),e.qZA(),e.qZA(),e.TgZ(46,"div",26),e._UZ(47,"advert"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&i&&(e.xp6(6),e.Q6J("dataSource",r.dataSource),e.xp6(37),e.Q6J("matHeaderRowDef",r.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",r.displayedColumns),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(7,be))("pageSize",10)("disabled",r.loading))},directives:[z.a8,f.BZ,Z.YE,f.w1,f.fO,f.Dz,f.as,f.nj,v.NW,K.I,f.ge,I.lW,G.gM,X.Hw,f.ev,Z.nU,f.XQ,f.Gk],pipes:[p.uU],encapsulation:2}),a})();var ye=n(7776);const Ee=[{path:"",component:Ue}];let Se=(()=>{class a{}return a.\u0275fac=function(i){return new(i||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[C.Bz.forChild(Ee),ye.m]]}),a})()},3098:(w,b)=>{var C=function(){function s(t){if(!t)throw new TypeError("Invalid argument; `value` has no value.");this.value=s.EMPTY,t&&s.isGuid(t)&&(this.value=t)}return s.isGuid=function(t){var v=t.toString();return t&&(t instanceof s||s.validator.test(v))},s.create=function(){return new s([s.gen(2),s.gen(1),s.gen(1),s.gen(1),s.gen(3)].join("-"))},s.createEmpty=function(){return new s("emptyguid")},s.parse=function(t){return new s(t)},s.raw=function(){return[s.gen(2),s.gen(1),s.gen(1),s.gen(1),s.gen(3)].join("-")},s.gen=function(t){for(var v="",Z=0;Z<t;Z++)v+=(65536*(1+Math.random())|0).toString(16).substring(1);return v},s.prototype.equals=function(t){return s.isGuid(t)&&this.value===t.toString()},s.prototype.isEmpty=function(){return this.value===s.EMPTY},s.prototype.toString=function(){return this.value},s.prototype.toJSON=function(){return{value:this.value}},s.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),s.EMPTY="00000000-0000-0000-0000-000000000000",s}();b.i=C}}]);