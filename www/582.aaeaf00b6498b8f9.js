"use strict";(self.webpackChunkloadgistix=self.webpackChunkloadgistix||[]).push([[582],{1708:(y,u,s)=>{s.d(u,{I:()=>U});var f=s(7445),Z=s(2340),t=s(5e3),e=s(8279),w=s(7261),A=s(6407),T=s(8951),_=s(4521),D=s(9808),v=s(9224);function b(o,h){if(1&o&&t._UZ(0,"img",7),2&o){const r=t.oxw().$implicit,d=t.oxw(2);t.Q6J("src",d.imagesFolder+"Adverts/"+r.id+r.avatar+"?t="+d.timestamp,t.LSH)}}function x(o,h){if(1&o&&(t.TgZ(0,"mat-card",3),t.TgZ(1,"mat-card-title-group"),t.TgZ(2,"mat-card-title",4),t._uU(3),t.qZA(),t.TgZ(4,"mat-card-subtitle"),t._uU(5),t.qZA(),t.YNc(6,b,1,1,"img",5),t.qZA(),t.TgZ(7,"mat-card-content"),t._uU(8),t._UZ(9,"br"),t._UZ(10,"br"),t.TgZ(11,"a",6),t._uU(12),t.qZA(),t.qZA(),t.qZA()),2&o){const r=h.$implicit;t.xp6(3),t.Oqu(r.title),t.xp6(2),t.Oqu(r.subTitle),t.xp6(1),t.Q6J("ngIf",r.avatar),t.xp6(2),t.hij(" ",r.content,""),t.xp6(3),t.Q6J("href",r.link,t.LSH),t.xp6(1),t.Oqu(r.link)}}function B(o,h){if(1&o&&(t.ynx(0),t.YNc(1,x,13,6,"mat-card",2),t.BQk()),2&o){const r=t.oxw();t.xp6(1),t.Q6J("ngForOf",r.advertItems)}}function E(o,h){1&o&&(t.TgZ(0,"mat-card",3),t.TgZ(1,"mat-card-title-group"),t.TgZ(2,"mat-card-title",4),t._uU(3,"Loadgistix"),t.qZA(),t.TgZ(4,"mat-card-subtitle"),t._uU(5,"Get more"),t.qZA(),t._UZ(6,"img",8),t.qZA(),t.TgZ(7,"mat-card-content"),t._uU(8," Contact us today - we will show you how to get the best out of Loadgistix! "),t.qZA(),t.qZA())}let U=(()=>{class o{constructor(r,d,c,i,g){this.apiService=r,this._snackBar=d,this.variableService=c,this.authService=i,this._router=g,this.timestamp=0,this.imagesFolder=Z.N.api+"Images/",this.loading=!0,this.advertItems=[],this.timestamp=(new Date).getTime()}ngOnInit(){this.getAdverts().then(d=>{this.advertItems=d});const r=(0,f.F)(6e5);this.subscription=r.subscribe(d=>{this.authService.check().subscribe(c=>{c&&this.getAdverts().then(i=>{this.advertItems=i,this.timestamp=(new Date).getTime()})})})}getAdverts(){return new Promise(d=>{try{this.apiService.post("adverts","available",null).subscribe({next:c=>{1==c.result?d(c.data):"Expired"==c.message?this._router.navigate(["/sign-out"]):this._snackBar.open("Error: "+c.message,null,{duration:2e3})},error:c=>{console.log(c),this._snackBar.open("Error: "+c,null,{duration:2e3})},complete:()=>{}})}catch(c){d([])}})}}return o.\u0275fac=function(r){return new(r||o)(t.Y36(e.s),t.Y36(w.ux),t.Y36(A.S),t.Y36(T.e),t.Y36(_.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["advert"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden","style","margin-bottom: 12px;",4,"ngIf"],["class","flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden","style","margin-bottom: 12px;",4,"ngFor","ngForOf"],[1,"flex","flex-col","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden",2,"margin-bottom","12px"],[2,"font-size","18px"],["mat-card-sm-image","",3,"src",4,"ngIf"],["target","_blank",3,"href"],["mat-card-sm-image","",3,"src"],["mat-card-sm-image","","src","assets/images/no-image.jpg"]],template:function(r,d){1&r&&(t.YNc(0,B,2,1,"ng-container",0),t.YNc(1,E,9,0,"mat-card",1)),2&r&&(t.Q6J("ngIf",d.advertItems.length>0),t.xp6(1),t.Q6J("ngIf",0===d.advertItems.length))},directives:[D.O5,D.sg,v.a8,v.C1,v.n5,v.$j,v.dn,v.vP],styles:[".mat-card-sm-image[_ngcontent-%COMP%]{max-width:120px;max-height:120px;width:auto;height:auto}"]}),o})()},7582:(y,u,s)=>{s.r(u),s.d(u,{DashboardModule:()=>c});var f=s(4521),Z=s(7579),t=s(2340),e=s(5e3),w=s(6407),A=s(8279),T=s(7261),_=s(6362),D=s(1135),v=s(8505),b=s(520);let x=(()=>{class i{constructor(a){this._httpClient=a,this._data=new D.X(null)}get data$(){return this._data.asObservable()}getData(){return this._httpClient.get("api/dashboards/project").pipe((0,v.b)(a=>{this._data.next(a)}))}}return i.\u0275fac=function(a){return new(a||i)(e.LFG(b.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var B=s(7455),E=s(1708);function U(i,g){if(1&i&&(e.ynx(0),e.TgZ(1,"div",25),e._uU(2),e.qZA(),e.BQk()),2&i){const a=g.$implicit,n=e.oxw();e.xp6(2),e.AsE(" ",a("welcome-back"),", ",n.user.firstName,"!")}}let o=(()=>{class i{constructor(a,n,l,p,S,C){this._router=a,this.variableService=n,this.apiService=l,this._snackBar=p,this.fuseSplashScreenService=S,this._dashboardService=C,this.timestamp=0,this.imagesFolder=t.N.api+"Images/",this.chartReview={},this.chartTaskDistribution={},this.chartBudgetDistribution={},this.chartWeeklyExpenses={},this.chartMonthlyExpenses={},this.chartYearlyExpenses={},this.selectedProject="ACME Corp. Backend App",this._unsubscribeAll=new Z.x,this.loading=!0,this.user=JSON.parse(localStorage.getItem("user")),this.timestamp=(new Date).getTime(),this.getDashboard().then(I=>{this.viewsAdvert=0,this.viewsBusinessDirectory=0,this.totalBids=0,this.totalBidsDelivered=0,this.totalBidsDeliveredLoad=0,this.totalBidsDeliveredVehicle=0,this.reviews=[],I.forEach(m=>{switch(m.category){case"Adverts":this.viewsAdvert=this.viewsAdvert+1;break;case"Business Directory":this.viewsBusinessDirectory=this.viewsBusinessDirectory+1;break;case"Loads":this.totalBidsDelivered=this.totalBidsDelivered+1,"Load"==m.description&&(this.totalBidsDeliveredLoad=this.totalBidsDeliveredLoad+1),"Driver"==m.description&&(this.totalBidsDeliveredVehicle=this.totalBidsDeliveredVehicle+1);break;case"Review":this.reviews.push(m);break;case"Bids":this.totalBids=this.totalBids+1}})})}ngOnInit(){setTimeout(()=>{this._prepareChartData(),this.variableService.setPageSelected("Dashboard"),this.loading=!1},1e3)}getDashboard(){return new Promise(n=>{try{this.apiService.get("dashboard").subscribe({next:l=>{1==l.result?n(l.data):"Expired"==l.message?this._router.navigate(["/sign-out"]):(this._snackBar.open("Error: "+l.message,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1)},error:l=>{console.log(l),this._snackBar.open("Error: "+l,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1},complete:()=>{}})}catch(l){n([])}})}trackByFn(a,n){return n.id||a}_fixSvgFill(a){const n=this._router.url;Array.from(a.querySelectorAll("*[fill]")).filter(l=>-1!==l.getAttribute("fill").indexOf("url(")).forEach(l=>{const p=l.getAttribute("fill");l.setAttribute("fill",`url(${n}${p.slice(p.indexOf("#"))}`)})}_prepareChartData(){this.chartReview={series:[{name:"Desktops",data:[this.reviews.filter(a=>a.date==new Date((new Date).setDate((new Date).getDate()-6))).length,this.reviews.filter(a=>a.date==new Date((new Date).setDate((new Date).getDate()-5))).length,this.reviews.filter(a=>a.date==new Date((new Date).setDate((new Date).getDate()-4))).length,this.reviews.filter(a=>a.date==new Date((new Date).setDate((new Date).getDate()-3))).length,this.reviews.filter(a=>a.date==new Date((new Date).setDate((new Date).getDate()-2))).length,this.reviews.filter(a=>a.date==new Date((new Date).setDate((new Date).getDate()-1))).length,this.reviews.filter(a=>a.date==new Date((new Date).setDate((new Date).getDate()-0))).length]}],chart:{height:350,type:"line",zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{curve:"straight"},title:{text:"Reviews",align:"left"},grid:{row:{colors:["#f3f3f3","transparent"],opacity:.5}},xaxis:{categories:[new Date((new Date).setDate((new Date).getDate()-6)),new Date((new Date).setDate((new Date).getDate()-5)),new Date((new Date).setDate((new Date).getDate()-4)),new Date((new Date).setDate((new Date).getDate()-3)),new Date((new Date).setDate((new Date).getDate()-2)),new Date((new Date).setDate((new Date).getDate()-1)),new Date]}}}}return i.\u0275fac=function(a){return new(a||i)(e.Y36(f.F0),e.Y36(w.S),e.Y36(A.s),e.Y36(T.ux),e.Y36(_.j),e.Y36(x))},i.\u0275cmp=e.Xpm({type:i,selectors:[["dashboard"]],decls:52,vars:5,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],[1,"bg-card"],[1,"flex","flex-col","w-full","max-w-screen-xl","mx-auto","px-6","sm:px-8"],[1,"flex","flex-col","sm:flex-row","flex-auto","sm:items-center","min-w-0","my-2","sm:my-2"],[1,"flex","flex-auto","items-center","min-w-0"],[1,"flex-0","w-16","h-16","rounded-full","overflow-hidden"],["onerror","this.src='assets/images/no-image.jpg';this.onerror='';",1,"w-full","h-full","object-cover",3,"src"],[1,"flex","flex-col","min-w-0","ml-4"],[4,"transloco"],[1,"grid","ml-8","mr-8"],[1,"flex-auto","-mt-px","pt-4","sm:pt-6"],[1,"w-full","max-w-screen-xl","mx-auto"],[1,"grid","grid-cols-1","sm:grid-cols-2","md:grid-cols-4","gap-6","w-full","min-w-0"],[1,"flex","flex-col","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden"],[1,"flex","items-start","justify-between"],[1,"text-lg","font-medium","tracking-tight","leading-6","truncate"],[1,"flex","flex-col","items-center","mt-2"],[1,"text-7xl","sm:text-8xl","font-bold","tracking-tight","leading-none","text-blue-500"],[1,"text-lg","font-medium","text-blue-600","dark:text-blue-500"],[1,"text-7xl","sm:text-8xl","font-bold","tracking-tight","leading-none","text-red-500"],[1,"text-lg","font-medium","text-red-600","dark:text-red-500"],[1,"text-7xl","sm:text-8xl","font-bold","tracking-tight","leading-none","text-amber-500"],[1,"text-lg","font-medium","text-amber-600","dark:text-amber-500"],[1,"text-7xl","sm:text-8xl","font-bold","tracking-tight","leading-none","text-green-500"],[1,"text-lg","font-medium","text-green-600","dark:text-green-500"],[1,"text-2xl","md:text-5xl","font-semibold","tracking-tight","leading-7","md:leading-snug","truncate"]],template:function(a,n){1&a&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"div",5),e._UZ(6,"img",6),e.qZA(),e.TgZ(7,"div",7),e.YNc(8,U,3,2,"ng-container",8),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",9),e.TgZ(10,"div",10),e.TgZ(11,"div",11),e.TgZ(12,"div",12),e.TgZ(13,"div",13),e.TgZ(14,"div",14),e.TgZ(15,"div",15),e._uU(16,"Adverts"),e.qZA(),e.qZA(),e.TgZ(17,"div",16),e.TgZ(18,"div",17),e._uU(19),e.qZA(),e.TgZ(20,"div",18),e._uU(21,"Total Views"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(22,"div",13),e.TgZ(23,"div",14),e.TgZ(24,"div",15),e._uU(25,"Business Directory"),e.qZA(),e.qZA(),e.TgZ(26,"div",16),e.TgZ(27,"div",19),e._uU(28),e.qZA(),e.TgZ(29,"div",20),e._uU(30,"Total Views"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(31,"div",13),e.TgZ(32,"div",14),e.TgZ(33,"div",15),e._uU(34,"Bids"),e.qZA(),e.qZA(),e.TgZ(35,"div",16),e.TgZ(36,"div",21),e._uU(37),e.qZA(),e.TgZ(38,"div",22),e._uU(39,"Total Bids"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(40,"div",13),e.TgZ(41,"div",14),e.TgZ(42,"div",15),e._uU(43,"Loads"),e.qZA(),e.qZA(),e.TgZ(44,"div",16),e.TgZ(45,"div",23),e._uU(46),e.qZA(),e.TgZ(47,"div",24),e._uU(48,"Completed"),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(49,"div",10),e.TgZ(50,"div",11),e._UZ(51,"advert"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&a&&(e.xp6(6),e.Q6J("src",n.imagesFolder+"Users/"+n.user.id+n.user.avatar+"?t="+n.timestamp,e.LSH),e.xp6(13),e.hij(" ",n.viewsAdvert," "),e.xp6(9),e.hij(" ",n.viewsBusinessDirectory," "),e.xp6(9),e.hij(" ",n.totalBids," "),e.xp6(9),e.hij(" ",n.totalBidsDelivered," "))},directives:[B.KI,E.I],encapsulation:2}),i})();var h=s(7776);const d=[{path:"",component:o,resolve:{data:(()=>{class i{constructor(a){this._dashboardService=a}resolve(a,n){return this._dashboardService.getData()}}return i.\u0275fac=function(a){return new(a||i)(e.LFG(x))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})()}}];let c=(()=>{class i{}return i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[[f.Bz.forChild(d),h.m]]}),i})()}}]);