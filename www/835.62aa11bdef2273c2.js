"use strict";(self.webpackChunkloadgistix=self.webpackChunkloadgistix||[]).push([[835],{1708:(I,b,s)=>{s.d(b,{I:()=>d});var _=s(7445),r=s(2340),i=s(5e3),m=s(8279),A=s(7261),f=s(6407),D=s(8951),L=s(4521),y=s(9808),C=s(9224);function V(p,x){if(1&p&&i._UZ(0,"img",7),2&p){const h=i.oxw().$implicit,Z=i.oxw(2);i.Q6J("src",Z.imagesFolder+"Adverts/"+h.id+h.avatar+"?t="+Z.timestamp,i.LSH)}}function e(p,x){if(1&p&&(i.TgZ(0,"mat-card",3),i.TgZ(1,"mat-card-title-group"),i.TgZ(2,"mat-card-title",4),i._uU(3),i.qZA(),i.TgZ(4,"mat-card-subtitle"),i._uU(5),i.qZA(),i.YNc(6,V,1,1,"img",5),i.qZA(),i.TgZ(7,"mat-card-content"),i._uU(8),i._UZ(9,"br"),i._UZ(10,"br"),i.TgZ(11,"a",6),i._uU(12),i.qZA(),i.qZA(),i.qZA()),2&p){const h=x.$implicit;i.xp6(3),i.Oqu(h.title),i.xp6(2),i.Oqu(h.subTitle),i.xp6(1),i.Q6J("ngIf",h.avatar),i.xp6(2),i.hij(" ",h.content,""),i.xp6(3),i.Q6J("href",h.link,i.LSH),i.xp6(1),i.Oqu(h.link)}}function u(p,x){if(1&p&&(i.ynx(0),i.YNc(1,e,13,6,"mat-card",2),i.BQk()),2&p){const h=i.oxw();i.xp6(1),i.Q6J("ngForOf",h.advertItems)}}function v(p,x){1&p&&(i.TgZ(0,"mat-card",3),i.TgZ(1,"mat-card-title-group"),i.TgZ(2,"mat-card-title",4),i._uU(3,"Loadgistix"),i.qZA(),i.TgZ(4,"mat-card-subtitle"),i._uU(5,"Get more"),i.qZA(),i._UZ(6,"img",8),i.qZA(),i.TgZ(7,"mat-card-content"),i._uU(8," Contact us today - we will show you how to get the best out of Loadgistix! "),i.qZA(),i.qZA())}let d=(()=>{class p{constructor(h,Z,T,S,E){this.apiService=h,this._snackBar=Z,this.variableService=T,this.authService=S,this._router=E,this.timestamp=0,this.imagesFolder=r.N.api+"Images/",this.loading=!0,this.advertItems=[],this.timestamp=(new Date).getTime()}ngOnInit(){this.getAdverts().then(Z=>{this.advertItems=Z});const h=(0,_.F)(6e5);this.subscription=h.subscribe(Z=>{this.authService.check().subscribe(T=>{T&&this.getAdverts().then(S=>{this.advertItems=S,this.timestamp=(new Date).getTime()})})})}getAdverts(){return new Promise(Z=>{try{this.apiService.post("adverts","available",null).subscribe({next:T=>{1==T.result?Z(T.data):"Expired"==T.message?this._router.navigate(["/sign-out"]):this._snackBar.open("Error: "+T.message,null,{duration:2e3})},error:T=>{console.log(T),this._snackBar.open("Error: "+T,null,{duration:2e3})},complete:()=>{}})}catch(T){Z([])}})}}return p.\u0275fac=function(h){return new(h||p)(i.Y36(m.s),i.Y36(A.ux),i.Y36(f.S),i.Y36(D.e),i.Y36(L.F0))},p.\u0275cmp=i.Xpm({type:p,selectors:[["advert"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden","style","margin-bottom: 12px;",4,"ngIf"],["class","flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden","style","margin-bottom: 12px;",4,"ngFor","ngForOf"],[1,"flex","flex-col","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden",2,"margin-bottom","12px"],[2,"font-size","18px"],["mat-card-sm-image","",3,"src",4,"ngIf"],["target","_blank",3,"href"],["mat-card-sm-image","",3,"src"],["mat-card-sm-image","","src","assets/images/no-image.jpg"]],template:function(h,Z){1&h&&(i.YNc(0,u,2,1,"ng-container",0),i.YNc(1,v,9,0,"mat-card",1)),2&h&&(i.Q6J("ngIf",Z.advertItems.length>0),i.xp6(1),i.Q6J("ngIf",0===Z.advertItems.length))},directives:[y.O5,y.sg,C.a8,C.C1,C.n5,C.$j,C.dn,C.vP],styles:[".mat-card-sm-image[_ngcontent-%COMP%]{max-width:120px;max-height:120px;width:auto;height:auto}"]}),p})()},6131:(I,b,s)=>{s.d(b,{S:()=>e});var _=s(8407),i=s(8966),m=s(5e3),A=s(7423);const f="assets/images/leaflet/marker-icon-2x.png",L="assets/images/leaflet/marker-shadow.png",y=_.icon({iconRetinaUrl:f,iconUrl:"assets/images/leaflet/location_green.png",shadowUrl:L,iconSize:[23,33],iconAnchor:[16,33],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[33,33]});_.icon({iconRetinaUrl:f,iconUrl:"assets/images/leaflet/truck_green.png",shadowUrl:L,iconSize:[33,33],iconAnchor:[16,33],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[33,33]}),_.icon({iconRetinaUrl:f,iconUrl:"assets/images/leaflet/location_red.png",shadowUrl:L,iconSize:[23,32],iconAnchor:[12,32],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[32,32]});let e=(()=>{class u{constructor(d,p){this.data=d,this.dialogRef=p,this.location={lat:28.1045642,lon:-26.3296247,label:""},d&&(this.location.lat=d.lat,this.location.lon=d.lon,this.location.label=d.label)}ngOnInit(){}ngAfterViewInit(){this.initMap(),this.initAutocomplete()}initMap(){this.map=_.map("map",{center:[this.location.lat,this.location.lon],zoom:14}),_.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18,minZoom:3,attribution:'&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'}).addTo(this.map),_.marker(new _.LatLng(this.location.lat,this.location.lon),{icon:y}).addTo(this.map)}initAutocomplete(){const d=document.getElementById("pac-input"),x=new google.maps.places.Autocomplete(d,{componentRestrictions:{country:"za"}});x.addListener("place_changed",()=>{const h=x.getPlace();h.geometry&&h.geometry.location?(this.location.lat=h.geometry.location.lat(),this.location.lon=h.geometry.location.lng(),this.location.label=h.formatted_address,_.marker(new _.LatLng(this.location.lat,this.location.lon),{icon:y}).addTo(this.map),setTimeout(()=>{this.map.fitBounds(_.latLngBounds(new _.LatLng(this.location.lat,this.location.lon),new _.LatLng(this.location.lat,this.location.lon)))},100)):console.log("Returned place contains no geometry")})}cancel(){this.dialogRef.close(null)}submit(){this.dialogRef.close(this.location)}}return u.\u0275fac=function(d){return new(d||u)(m.Y36(i.WI),m.Y36(i.so))},u.\u0275cmp=m.Xpm({type:u,selectors:[["app-address"]],decls:15,vars:0,consts:[["mat-dialog-title","",1,"accent","dialog-title","bg-primary","text-on-primary","text-secondary",2,"margin-bottom","0px !important"],["mat-dialog-content","",2,"padding","0!important"],["id","pac-card",1,"pac-card"],["id","pac-container"],["id","pac-input","type","text","placeholder","Enter a location"],[1,"map-container"],[1,"map-frame"],["id","map"],["mat-dialog-actions","",1,"dialog-footer",2,"margin-top","0px !important"],[2,"flex","1 1 auto"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"click"]],template:function(d,p){1&d&&(m.TgZ(0,"h1",0),m._uU(1,"Select Address"),m.qZA(),m.TgZ(2,"div",1),m.TgZ(3,"div",2),m.TgZ(4,"div",3),m._UZ(5,"input",4),m.qZA(),m.qZA(),m.TgZ(6,"div",5),m.TgZ(7,"div",6),m._UZ(8,"div",7),m.qZA(),m.qZA(),m.qZA(),m.TgZ(9,"div",8),m._UZ(10,"span",9),m.TgZ(11,"button",10),m.NdJ("click",function(){return p.cancel()}),m._uU(12,"Cancel"),m.qZA(),m.TgZ(13,"button",11),m.NdJ("click",function(){return p.submit()}),m._uU(14,"Submit"),m.qZA(),m.qZA())},directives:[i.uh,i.xY,i.H8,A.lW],styles:[".map-container[_ngcontent-%COMP%]{position:relative;top:0;left:0;right:0;bottom:0;height:50vh;min-height:200px}.map-frame[_ngcontent-%COMP%], #map[_ngcontent-%COMP%]{height:100%}html[_ngcontent-%COMP%], body[_ngcontent-%COMP%]{height:100%;margin:0;padding:0}#description[_ngcontent-%COMP%]{font-family:Roboto;font-size:15px;font-weight:300}#infowindow-content[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-weight:700}#infowindow-content[_ngcontent-%COMP%]{display:none}#map[_ngcontent-%COMP%]   #infowindow-content[_ngcontent-%COMP%]{display:inline}.pac-card[_ngcontent-%COMP%]{background-color:#fff;border:0;border-radius:2px;box-shadow:0 1px 4px -1px #0000004d;margin:10px;font:400 18px Roboto,Arial,sans-serif;overflow:hidden;font-family:Roboto;padding:0}#pac-container[_ngcontent-%COMP%]{padding-bottom:12px;margin-right:12px}.pac-controls[_ngcontent-%COMP%]{display:inline-block;padding:5px 11px}.pac-controls[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-family:Roboto;font-size:13px;font-weight:300}#pac-input[_ngcontent-%COMP%]{background-color:#fff;font-family:Roboto;font-size:15px;font-weight:300;margin-left:12px;padding:0 11px 0 13px;text-overflow:ellipsis;width:400px}#pac-input[_ngcontent-%COMP%]:focus{border-color:#4d90fe}#title[_ngcontent-%COMP%]{color:#fff;background-color:#4d90fe;font-size:25px;font-weight:500;padding:6px 12px}#target[_ngcontent-%COMP%]{width:345px}"]}),u})()},7738:(I,b,s)=>{s.d(b,{_:()=>e});var _=s(7295),r=s(7579),i=s(5e3),m=s(8966),A=s(9808),f=s(7423);function D(u,v){if(1&u){const d=i.EpF();i.TgZ(0,"webcam",11),i.NdJ("imageCapture",function(x){return i.CHM(d),i.oxw(2).handleImage(x)}),i.qZA()}if(2&u){const d=i.oxw(2);i.Q6J("height",500)("width",1e3)("trigger",d.triggerObservable)("switchCamera",d.nextWebcamObservable)}}function L(u,v){if(1&u&&(i.TgZ(0,"ul"),i.TgZ(1,"li"),i._uU(2),i.ALo(3,"json"),i.qZA(),i.qZA()),2&u){const d=v.$implicit;i.xp6(2),i.Oqu(i.lcZ(3,1,d))}}function y(u,v){if(1&u&&(i.TgZ(0,"div"),i.TgZ(1,"h4"),i._uU(2,"Error Messages:"),i.qZA(),i.YNc(3,L,4,3,"ul",12),i.qZA()),2&u){const d=i.oxw(2);i.xp6(3),i.Q6J("ngForOf",d.errors)}}function C(u,v){if(1&u&&(i.TgZ(0,"div"),i.TgZ(1,"div",8),i.YNc(2,D,1,4,"webcam",9),i.qZA(),i.YNc(3,y,4,1,"div",10),i.qZA()),2&u){const d=i.oxw();i.xp6(2),i.Q6J("ngIf",d.showWebcam),i.xp6(1),i.Q6J("ngIf",d.errors.length>0)}}function V(u,v){1&u&&i._uU(0," Camera device not available ")}let e=(()=>{class u{constructor(d){this.dialogRef=d,this.showWebcam=!0,this.isCameraExist=!0,this.errors=[],this.trigger=new r.x,this.nextWebcam=new r.x}ngOnInit(){_.BF.getAvailableVideoInputs().then(d=>{this.isCameraExist=d&&d.length>0})}takeSnapshot(){this.trigger.next()}onOffWebCame(){this.showWebcam=!this.showWebcam}handleInitError(d){this.errors.push(d)}changeWebCame(d){this.nextWebcam.next(d)}handleImage(d){this.dialogRef.close(d)}get triggerObservable(){return this.trigger.asObservable()}get nextWebcamObservable(){return this.nextWebcam.asObservable()}cancel(){this.dialogRef.close(null)}}return u.\u0275fac=function(d){return new(d||u)(i.Y36(m.so))},u.\u0275cmp=i.Xpm({type:u,selectors:[["app-camera"]],decls:12,vars:2,consts:[["mat-dialog-title","",1,"accent","dialog-title","bg-primary","text-on-primary","text-secondary",2,"margin-bottom","0px !important"],["mat-dialog-content","",2,"padding","0!important"],[4,"ngIf","ngIfElse"],["noCameraExist",""],["mat-dialog-actions","",1,"dialog-footer",2,"margin-top","0px !important"],[2,"flex","1 1 auto"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"click"],[2,"text-align","center"],[3,"height","width","trigger","switchCamera","imageCapture",4,"ngIf"],[4,"ngIf"],[3,"height","width","trigger","switchCamera","imageCapture"],[4,"ngFor","ngForOf"]],template:function(d,p){if(1&d&&(i.TgZ(0,"h1",0),i._uU(1,"Take Photo"),i.qZA(),i.TgZ(2,"div",1),i.YNc(3,C,4,2,"div",2),i.YNc(4,V,1,0,"ng-template",null,3,i.W1O),i.qZA(),i.TgZ(6,"div",4),i._UZ(7,"span",5),i.TgZ(8,"button",6),i.NdJ("click",function(){return p.cancel()}),i._uU(9,"Cancel"),i.qZA(),i.TgZ(10,"button",7),i.NdJ("click",function(){return p.takeSnapshot()}),i._uU(11,"Take Photo"),i.qZA(),i.qZA()),2&d){const x=i.MAs(5);i.xp6(3),i.Q6J("ngIf",p.isCameraExist)("ngIfElse",x)}},directives:[m.uh,m.xY,A.O5,m.H8,f.lW,_.i3,A.sg],pipes:[A.Ts],styles:[".button[_ngcontent-%COMP%]{color:#fff;background-color:#00f;padding:4px;text-align:center;text-decoration:none;display:inline-block;font-size:16px;margin:4px 2px;transition-duration:.4s;cursor:pointer;border-radius:2px}ul.links[_ngcontent-%COMP%]{padding-bottom:10px}"]}),u})()},835:(I,b,s)=>{s.r(b),s.d(b,{VehiclesModule:()=>Ge});var _=s(4521),r=s(3075),i=s(8966),m=s(6087),A=s(4847),f=s(4999),D=s(3098),L=s(7579),y=s(6131),C=s(7738),V=s(2340),e=s(5e3),u=s(7261),v=s(8279),d=s(7093),p=s(7322),x=s(4107),h=s(9808),Z=s(7531),T=s(24),S=s(6856),E=s(7423),N=s(5245),k=s(508);function O(a,n){if(1&a&&(e.TgZ(0,"mat-option",36),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.Q6J("value",t.id),e.xp6(1),e.hij(" ",t.description," ")}}function Y(a,n){if(1&a&&(e.TgZ(0,"mat-optgroup",34),e.YNc(1,O,2,2,"mat-option",35),e.qZA()),2&a){const t=n.$implicit;e.Q6J("label",t.description),e.xp6(1),e.Q6J("ngForOf",t.vehicleTypeList)}}function w(a,n){1&a&&(e.TgZ(0,"mat-error"),e._uU(1,"Description is required"),e.qZA())}function P(a,n){1&a&&(e.TgZ(0,"mat-error"),e._uU(1,"Registration Number is required "),e.qZA())}function B(a,n){1&a&&(e.TgZ(0,"mat-error"),e._uU(1,"Max Load Weight is required"),e.qZA())}function J(a,n){1&a&&(e.TgZ(0,"mat-error"),e._uU(1,"Max Load Volume is required"),e.qZA())}function F(a,n){if(1&a&&(e.TgZ(0,"div",4),e.TgZ(1,"mat-form-field",5),e.TgZ(2,"mat-label"),e._uU(3,"Max Load Volume (litres)"),e.qZA(),e._UZ(4,"input",37),e.YNc(5,J,2,0,"mat-error",9),e.qZA(),e.qZA()),2&a){const t=e.oxw();e.xp6(5),e.Q6J("ngIf",t.hasError("maxLoadVolume","required"))}}function Q(a,n){1&a&&(e.TgZ(0,"mat-error"),e._uU(1,"Max Load Height is required"),e.qZA())}function W(a,n){if(1&a&&(e.TgZ(0,"div",4),e.TgZ(1,"mat-form-field",5),e.TgZ(2,"mat-label"),e._uU(3,"Max Load Height (cm)"),e.qZA(),e._UZ(4,"input",38),e.YNc(5,Q,2,0,"mat-error",9),e.qZA(),e.qZA()),2&a){const t=e.oxw();e.xp6(5),e.Q6J("ngIf",t.hasError("maxLoadHeight","required"))}}function H(a,n){1&a&&(e.TgZ(0,"mat-error"),e._uU(1,"Max Load Width is required"),e.qZA())}function j(a,n){if(1&a&&(e.TgZ(0,"div",4),e.TgZ(1,"mat-form-field",5),e.TgZ(2,"mat-label"),e._uU(3,"Max Load Width (cm)"),e.qZA(),e._UZ(4,"input",39),e.YNc(5,H,2,0,"mat-error",9),e.qZA(),e.qZA()),2&a){const t=e.oxw();e.xp6(5),e.Q6J("ngIf",t.hasError("maxLoadWidth","required"))}}function R(a,n){1&a&&(e.TgZ(0,"mat-error"),e._uU(1,"Max Load Length is required"),e.qZA())}function z(a,n){if(1&a&&(e.TgZ(0,"div",4),e.TgZ(1,"mat-form-field",5),e.TgZ(2,"mat-label"),e._uU(3,"Max Load Length (cm)"),e.qZA(),e._UZ(4,"input",40),e.YNc(5,R,2,0,"mat-error",9),e.qZA(),e.qZA()),2&a){const t=e.oxw();e.xp6(5),e.Q6J("ngIf",t.hasError("maxLoadLength","required"))}}function $(a,n){1&a&&(e.TgZ(0,"mat-error"),e._uU(1,"Available Capacity is required "),e.qZA())}function K(a,n){if(1&a&&(e.TgZ(0,"div",4),e.TgZ(1,"mat-form-field",5),e.TgZ(2,"mat-label"),e._uU(3,"Available Capacity (%)"),e.qZA(),e._UZ(4,"input",41),e.YNc(5,$,2,0,"mat-error",9),e.qZA(),e.qZA()),2&a){const t=e.oxw();e.xp6(5),e.Q6J("ngIf",t.hasError("availableCapacity","required"))}}function G(a,n){1&a&&e._UZ(0,"div",4)}function X(a,n){1&a&&(e.TgZ(0,"mat-error"),e._uU(1,"Originating Address is required "),e.qZA())}function ee(a,n){1&a&&(e.TgZ(0,"mat-error"),e._uU(1,"Destination Address is required "),e.qZA())}function te(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"img",42),e.NdJ("click",function(){return e.CHM(t),e.oxw(),e.MAs(78).click()}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("src",t.previewImage,e.LSH)}}function ie(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"img",42),e.NdJ("click",function(){return e.CHM(t),e.oxw(),e.MAs(78).click()}),e.qZA()}if(2&a){const t=e.oxw();e.Q6J("src",t.imagesFolder+"Vehicles/"+t.form.value.id+t.form.value.avatar+"?t="+t.timestamp,e.LSH)}}function ae(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"img",43),e.NdJ("click",function(){return e.CHM(t),e.oxw(),e.MAs(78).click()}),e.qZA()}}let oe=(()=>{class a{constructor(t,o,l,c,g){this.dialog=t,this.dialogRef=o,this.data=l,this._snackBar=c,this.apiService=g,this.timestamp=0,this.imagesFolder=V.N.api+"Images/",this.previewImage=null,this.vehicleCategoryList=[],this.hasError=(q,U)=>this.form.controls[q].hasError(U),this.timestamp=(new Date).getTime(),this.formErrors=l.formErrors,this.formData=l,this._unsubscribeAll=new L.x}ngOnInit(){this.form=this.data.form,this.formValid=!1,this.data.vehicleCategoryList.forEach(t=>{t.vehicleTypeList=this.data.vehicleTypeList.filter(o=>o.vehicleCategoryId==t.id).sort((o,l)=>o.description.localeCompare(l.description)),this.vehicleCategoryList.push(t)}),setTimeout(()=>{this.vehicleCategoryList=this.vehicleCategoryList.sort((t,o)=>t.description.localeCompare(o.description)),this.vehicleTypeChanged()},100)}handleFileInput(t){this.fileToUpload=t.item(0),this.form.controls.fileToUpload.setValue(this.fileToUpload);var o=(this.fileToUpload.size/1048576).toFixed(2);if(Number(o)>Number(.25))return this._snackBar.open("Error: Maximum FileSize is 200kB",null,{duration:2e3}),!1;{let l=new FileReader;l.onload=c=>{this.previewImage=c.target.result},l.readAsDataURL(this.fileToUpload)}}initCamera(){const t=new i.vA;t.autoFocus=!0,t.disableClose=!0,t.hasBackdrop=!0,t.ariaLabel="fffff",t.width="800px",this.dialog.open(C._,t).afterClosed().subscribe(l=>{l&&(this.form.controls.avatar.setValue(l._imageAsDataUrl),this.previewImage=l._imageAsDataUrl,this.form.controls.avatarChanged.setValue(!0))})}getAddress(t){const o=new i.vA;o.data={label:"Loadgistix",lat:28.1045642,lon:-26.3296247},"originatingAddressLabel"==t&&this.form.controls.originatingAddressLabel.value&&(o.data.label=this.form.controls.originatingAddressLabel.value,o.data.lat=this.form.controls.originatingAddressLat.value,o.data.lon=this.form.controls.originatingAddressLon.value),"destinationAddressLabel"==t&&this.form.controls.destinationAddressLabel.value&&(o.data.label=this.form.controls.destinationAddressLabel.value,o.data.lat=this.form.controls.destinationAddressLat.value,o.data.lon=this.form.controls.destinationAddressLon.value),o.autoFocus=!0,o.disableClose=!0,o.hasBackdrop=!0,o.ariaLabel="fffff",o.width="800px",this.dialog.open(y.S,o).afterClosed().subscribe(c=>{c&&(console.log(t,c),"originatingAddressLabel"==t&&(this.form.controls.originatingAddressLabel.setValue(c.label),this.form.controls.originatingAddressLat.setValue(c.lat),this.form.controls.originatingAddressLon.setValue(c.lon)),"destinationAddressLabel"==t&&(this.form.controls.destinationAddressLabel.setValue(c.label),this.form.controls.destinationAddressLat.setValue(c.lat),this.form.controls.destinationAddressLon.setValue(c.lon)))})}vehicleTypeChanged(){this.getVehicleTypeLiquid()?(this.form.controls.maxLoadHeight.clearValidators(),this.form.controls.maxLoadWidth.clearValidators(),this.form.controls.maxLoadLength.clearValidators(),this.form.controls.availableCapacity.clearValidators(),this.form.controls.maxLoadVolume.setValidators([r.kI.required])):(this.form.controls.maxLoadHeight.setValidators([r.kI.required]),this.form.controls.maxLoadWidth.setValidators([r.kI.required]),this.form.controls.maxLoadLength.setValidators([r.kI.required]),this.form.controls.availableCapacity.setValidators([r.kI.required]),this.form.controls.maxLoadVolume.clearValidators()),setTimeout(()=>{this.form.controls.maxLoadHeight.updateValueAndValidity(),this.form.controls.maxLoadWidth.updateValueAndValidity(),this.form.controls.maxLoadLength.updateValueAndValidity(),this.form.controls.availableCapacity.updateValueAndValidity(),this.form.controls.maxLoadVolume.updateValueAndValidity()},100)}getVehicleTypeLiquid(){return!!this.form.controls.vehicleTypeId.value&&this.formData.vehicleTypeList.find(t=>t.id===this.form.controls.vehicleTypeId.value).liquid}onNoClick(){this.dialogRef.close(!1)}onYesClick(){setTimeout(()=>{this.dialogRef.close(this.form.value)},100)}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(i.uw),e.Y36(i.so),e.Y36(i.WI),e.Y36(u.ux),e.Y36(v.s))},a.\u0275cmp=e.Xpm({type:a,selectors:[["dialog-vehicle"]],decls:93,vars:22,consts:[["mat-dialog-title","",1,"accent","dialog-title","bg-primary","text-on-primary","text-secondary"],["mat-dialog-content","","fxLayout","column"],["fxLayout","column","fxLayoutAlign","start","fxFlex","1 0 auto","name","form","novalidate","",1,"mat-white-bg","w-100-p",2,"padding","0px!important",3,"formGroup"],["fxLayout","row wrap",1,"w-100-p"],["fxFlex","100","fxFlex.gt-xs","50",1,"p-4",2,"padding","0px!important"],["appearance","outline",1,"w-100-p"],["placeholder","VehicleTypeId","formControlName","vehicleTypeId",3,"selectionChange"],[3,"label",4,"ngFor","ngForOf"],["matInput","","placeholder","Description","formControlName","description","id","description"],[4,"ngIf"],["matInput","","placeholder","Registration Number","formControlName","registrationNumber","id","description"],["matInput","","type","number","placeholder","Max Load Weight","formControlName","maxLoadWeight","id","maxLoadWeight"],["fxFlex","100","fxFlex.gt-xs","50","class","p-4","style","padding: 0px!important;",4,"ngIf"],["matInput","","placeholder","Choose a date","formControlName","availableFrom",3,"ngxMatDatetimePicker"],["matSuffix","",3,"for"],["picker_availableFrom",""],["matInput","","placeholder","Choose a date","formControlName","availableTo",3,"ngxMatDatetimePicker"],["picker_availableTo",""],["readonly","","matInput","","placeholder","Originating Address","formControlName","originatingAddressLabel","id","originatingAddressLabel"],["matSuffix","","mat-button","",3,"click"],["readonly","","matInput","","placeholder","Destination Address","formControlName","destinationAddressLabel","id","destinationAddressLabel"],["fxFlex","100","fxLayout","row","fxLayoutAlign","center center",1,"p-4"],["id","fileInput","type","file","accept",".jpg,.png,.jpeg",2,"display","none",3,"click","change"],["Image",""],["fxFlex","","fxLayout","column"],["fxFlex","","fxLayout","row"],["mat-flat-button","","fxFlex","100","color","primary",2,"margin-left","2px","margin-right","2px",3,"click"],["fxFlex","","fxLayout","row","fxLayoutAlign","center center",2,"margin-top","4px"],["style","max-width: 120px;max-height: 120px;width: auto;height: auto;","class","image",3,"src","click",4,"ngIf"],["style","max-width: 120px;max-height: 120px;width: auto;height: auto;","src","assets/images/no-image.jpg","class","image",3,"click",4,"ngIf"],["mat-dialog-actions","",1,"dialog-footer"],[2,"flex","1 1 auto"],["mat-flat-button","","color","warn",3,"click"],["mat-flat-button","","color","primary",3,"disabled","click"],[3,"label"],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["matInput","","type","number","placeholder","Max Load Volume","formControlName","maxLoadVolume","id","maxLoadVolume"],["matInput","","type","number","placeholder","Max Load Height","formControlName","maxLoadHeight","id","maxLoadHeight"],["matInput","","type","number","placeholder","Max Load Width","formControlName","maxLoadWidth","id","maxLoadWidth"],["matInput","","type","number","placeholder","Max Load Length","formControlName","maxLoadLength","id","maxLoadLength"],["matInput","","type","number","placeholder","AvailableCapacity","formControlName","availableCapacity","id","availableCapacity"],[1,"image",2,"max-width","120px","max-height","120px","width","auto","height","auto",3,"src","click"],["src","assets/images/no-image.jpg",1,"image",2,"max-width","120px","max-height","120px","width","auto","height","auto",3,"click"]],template:function(t,o){if(1&t){const l=e.EpF();e.TgZ(0,"h1",0),e._uU(1),e.qZA(),e.TgZ(2,"div",1),e.TgZ(3,"form",2),e.TgZ(4,"div",3),e.TgZ(5,"div",4),e.TgZ(6,"mat-form-field",5),e.TgZ(7,"mat-label"),e._uU(8,"Vehicle Type"),e.qZA(),e.TgZ(9,"mat-select",6),e.NdJ("selectionChange",function(){return o.vehicleTypeChanged()}),e.YNc(10,Y,2,2,"mat-optgroup",7),e.qZA(),e.TgZ(11,"mat-error"),e._uU(12,"Vehicle Type is required"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(13,"div",4),e.TgZ(14,"mat-form-field",5),e.TgZ(15,"mat-label"),e._uU(16,"Description"),e.qZA(),e._UZ(17,"input",8),e.YNc(18,w,2,0,"mat-error",9),e.qZA(),e.qZA(),e.TgZ(19,"div",4),e.TgZ(20,"mat-form-field",5),e.TgZ(21,"mat-label"),e._uU(22,"Registration Number"),e.qZA(),e._UZ(23,"input",10),e.YNc(24,P,2,0,"mat-error",9),e.qZA(),e.qZA(),e._UZ(25,"div",4),e.TgZ(26,"div",4),e.TgZ(27,"mat-form-field",5),e.TgZ(28,"mat-label"),e._uU(29,"Max Load Weight (kg)"),e.qZA(),e._UZ(30,"input",11),e.YNc(31,B,2,0,"mat-error",9),e.qZA(),e.qZA(),e.YNc(32,F,6,1,"div",12),e.YNc(33,W,6,1,"div",12),e.YNc(34,j,6,1,"div",12),e.YNc(35,z,6,1,"div",12),e.YNc(36,K,6,1,"div",12),e.YNc(37,G,1,0,"div",12),e.TgZ(38,"div",4),e.TgZ(39,"mat-form-field",5),e.TgZ(40,"mat-label"),e._uU(41,"Available From"),e.qZA(),e._UZ(42,"input",13),e._UZ(43,"mat-datepicker-toggle",14),e._UZ(44,"ngx-mat-datetime-picker",null,15),e.TgZ(46,"mat-error"),e._uU(47,"Available From is required"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(48,"div",4),e.TgZ(49,"mat-form-field",5),e.TgZ(50,"mat-label"),e._uU(51,"Available To"),e.qZA(),e._UZ(52,"input",16),e._UZ(53,"mat-datepicker-toggle",14),e._UZ(54,"ngx-mat-datetime-picker",null,17),e.TgZ(56,"mat-error"),e._uU(57,"Available To is required"),e.qZA(),e.qZA(),e.qZA(),e.TgZ(58,"div",4),e.TgZ(59,"mat-form-field",5),e.TgZ(60,"mat-label"),e._uU(61,"Originating Address"),e.qZA(),e._UZ(62,"input",18),e.TgZ(63,"button",19),e.NdJ("click",function(){return o.getAddress("originatingAddressLabel")}),e.TgZ(64,"mat-icon"),e._uU(65,"search"),e.qZA(),e.qZA(),e.YNc(66,X,2,0,"mat-error",9),e.qZA(),e.qZA(),e.TgZ(67,"div",4),e.TgZ(68,"mat-form-field",5),e.TgZ(69,"mat-label"),e._uU(70,"Destination Address"),e.qZA(),e._UZ(71,"input",20),e.TgZ(72,"button",19),e.NdJ("click",function(){return o.getAddress("destinationAddressLabel")}),e.TgZ(73,"mat-icon"),e._uU(74,"search"),e.qZA(),e.qZA(),e.YNc(75,ee,2,0,"mat-error",9),e.qZA(),e.qZA(),e.TgZ(76,"div",21),e.TgZ(77,"input",22,23),e.NdJ("click",function(){return e.CHM(l),e.MAs(78).value=null})("change",function(g){return o.handleFileInput(g.target.files)}),e.qZA(),e.TgZ(79,"div",24),e.TgZ(80,"div",25),e.TgZ(81,"button",26),e.NdJ("click",function(){return e.CHM(l),e.MAs(78).click()}),e._uU(82,"Upload Image"),e.qZA(),e.qZA(),e.TgZ(83,"div",27),e.YNc(84,te,1,1,"img",28),e.YNc(85,ie,1,1,"img",28),e.YNc(86,ae,1,0,"img",29),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(87,"div",30),e._UZ(88,"span",31),e.TgZ(89,"button",32),e.NdJ("click",function(){return o.onNoClick()}),e._uU(90,"Cancel"),e.qZA(),e.TgZ(91,"button",33),e.NdJ("click",function(){return o.onYesClick()}),e._uU(92,"Submit"),e.qZA(),e.qZA()}if(2&t){const l=e.MAs(45),c=e.MAs(55);e.xp6(1),e.hij("",o.formData.title," Vehicle"),e.xp6(2),e.Q6J("formGroup",o.form),e.xp6(7),e.Q6J("ngForOf",o.vehicleCategoryList),e.xp6(8),e.Q6J("ngIf",o.hasError("description","required")),e.xp6(6),e.Q6J("ngIf",o.hasError("registrationNumber","required")),e.xp6(7),e.Q6J("ngIf",o.hasError("maxLoadWeight","required")),e.xp6(1),e.Q6J("ngIf",o.getVehicleTypeLiquid()),e.xp6(1),e.Q6J("ngIf",!o.getVehicleTypeLiquid()),e.xp6(1),e.Q6J("ngIf",!o.getVehicleTypeLiquid()),e.xp6(1),e.Q6J("ngIf",!o.getVehicleTypeLiquid()),e.xp6(1),e.Q6J("ngIf",!o.getVehicleTypeLiquid()),e.xp6(1),e.Q6J("ngIf",!o.getVehicleTypeLiquid()),e.xp6(5),e.Q6J("ngxMatDatetimePicker",l),e.xp6(1),e.Q6J("for",l),e.xp6(9),e.Q6J("ngxMatDatetimePicker",c),e.xp6(1),e.Q6J("for",c),e.xp6(13),e.Q6J("ngIf",o.hasError("originatingAddressLabel","required")),e.xp6(9),e.Q6J("ngIf",o.hasError("destinationAddressLabel","required")),e.xp6(9),e.Q6J("ngIf",o.previewImage),e.xp6(1),e.Q6J("ngIf",!o.previewImage&&o.form.value.avatar),e.xp6(1),e.Q6J("ngIf",!o.previewImage&&!o.form.value.avatar),e.xp6(5),e.Q6J("disabled",!o.form.valid)}},directives:[i.uh,i.xY,d.xw,r._Y,r.JL,d.Wh,d.yH,r.sg,p.KE,p.hX,x.gD,r.JJ,r.u,h.sg,p.TO,Z.Nt,r.Fj,h.O5,r.wV,T.g2,S.nW,p.R9,T.AB,E.lW,N.Hw,i.H8,k.Nv,k.ey],encapsulation:2}),a})();var ne=s(520),le=s(6407),re=s(6362),se=s(1683),ce=s(9224),de=s(1708),me=s(7238);function ge(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"th",32),e.TgZ(1,"button",33),e.NdJ("click",function(){return e.CHM(t),e.oxw().initUpsert(null)}),e.TgZ(2,"mat-icon",34),e._uU(3,"add"),e.qZA(),e.qZA(),e.qZA()}if(2&a){const t=e.oxw();e.xp6(1),e.Q6J("disabled",t.loading)}}function he(a,n){if(1&a){const t=e.EpF();e.TgZ(0,"td",35),e.TgZ(1,"button",36),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.oxw().initUpsert(c)}),e.TgZ(2,"mat-icon",34),e._uU(3,"edit"),e.qZA(),e.qZA(),e.TgZ(4,"button",37),e.NdJ("click",function(){const c=e.CHM(t).$implicit;return e.oxw().initDelete(c.id)}),e.TgZ(5,"mat-icon",34),e._uU(6,"delete"),e.qZA(),e.qZA(),e.qZA()}if(2&a){const t=e.oxw();e.xp6(1),e.Q6J("disabled",t.loading),e.xp6(3),e.Q6J("disabled",t.loading)}}function pe(a,n){1&a&&(e.TgZ(0,"th",38),e.TgZ(1,"p",39),e._uU(2,"UserId"),e.qZA(),e.qZA())}function ue(a,n){if(1&a&&(e.TgZ(0,"td",40),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.xp6(1),e.hij(" ",t.userDescription," ")}}function fe(a,n){1&a&&(e.TgZ(0,"th",38),e.TgZ(1,"p",41),e._uU(2,"Vehicle Type"),e.qZA(),e.qZA())}function _e(a,n){if(1&a&&(e.TgZ(0,"td",40),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.xp6(1),e.hij(" ",t.vehicleType?t.vehicleType.description:""," ")}}function xe(a,n){1&a&&(e.TgZ(0,"th",38),e.TgZ(1,"p",42),e._uU(2,"Description"),e.qZA(),e.qZA())}function ve(a,n){if(1&a&&(e.TgZ(0,"td",40),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.xp6(1),e.hij(" ",t.description," ")}}function Ze(a,n){1&a&&(e.TgZ(0,"th",38),e.TgZ(1,"p",43),e._uU(2,"Registration Number"),e.qZA(),e.qZA())}function Te(a,n){if(1&a&&(e.TgZ(0,"td",40),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.xp6(1),e.hij(" ",t.registrationNumber," ")}}function Ae(a,n){1&a&&(e.TgZ(0,"th",38),e.TgZ(1,"p",44),e._uU(2,"Max Load Weight (kg)"),e.qZA(),e.qZA())}function Ce(a,n){if(1&a&&(e.TgZ(0,"td",40),e._uU(1),e.ALo(2,"number"),e.qZA()),2&a){const t=n.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.maxLoadWeight)," ")}}function be(a,n){1&a&&(e.TgZ(0,"th",38),e.TgZ(1,"p",45),e._uU(2,"Max Load Height (cm)"),e.qZA(),e.qZA())}function Le(a,n){if(1&a&&(e.TgZ(0,"td",40),e._uU(1),e.ALo(2,"number"),e.qZA()),2&a){const t=n.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.maxLoadHeight)," ")}}function ye(a,n){1&a&&(e.TgZ(0,"th",38),e.TgZ(1,"p",46),e._uU(2,"Max Load Width (cm)"),e.qZA(),e.qZA())}function qe(a,n){if(1&a&&(e.TgZ(0,"td",40),e._uU(1),e.ALo(2,"number"),e.qZA()),2&a){const t=n.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.maxLoadWidth)," ")}}function De(a,n){1&a&&(e.TgZ(0,"th",38),e.TgZ(1,"p",47),e._uU(2,"Max Load Length (cm)"),e.qZA(),e.qZA())}function Ue(a,n){if(1&a&&(e.TgZ(0,"td",40),e._uU(1),e.ALo(2,"number"),e.qZA()),2&a){const t=n.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.maxLoadLength)," ")}}function Ve(a,n){1&a&&(e.TgZ(0,"th",38),e.TgZ(1,"p",48),e._uU(2,"Max Load Volume (litres)"),e.qZA(),e.qZA())}function Se(a,n){if(1&a&&(e.TgZ(0,"td",40),e._uU(1),e.ALo(2,"number"),e.qZA()),2&a){const t=n.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.maxLoadVolume)," ")}}function Ie(a,n){1&a&&(e.TgZ(0,"th",38),e.TgZ(1,"p",49),e._uU(2,"Available Capacity (%)"),e.qZA(),e.qZA())}function Ee(a,n){if(1&a&&(e.TgZ(0,"td",40),e._uU(1),e.ALo(2,"number"),e.qZA()),2&a){const t=n.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.availableCapacity)," ")}}function Me(a,n){1&a&&(e.TgZ(0,"th",38),e.TgZ(1,"p",50),e._uU(2,"Available From"),e.qZA(),e.qZA())}function Ne(a,n){if(1&a&&(e.TgZ(0,"td",40),e._uU(1),e.ALo(2,"date"),e.qZA()),2&a){const t=n.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.availableFrom)," ")}}function ke(a,n){1&a&&(e.TgZ(0,"th",38),e.TgZ(1,"p",51),e._uU(2,"Available To"),e.qZA(),e.qZA())}function Oe(a,n){if(1&a&&(e.TgZ(0,"td",40),e._uU(1),e.ALo(2,"date"),e.qZA()),2&a){const t=n.$implicit;e.xp6(1),e.hij(" ",e.lcZ(2,1,t.availableTo)," ")}}function Ye(a,n){1&a&&(e.TgZ(0,"th",38),e.TgZ(1,"p",52),e._uU(2,"Originating Address"),e.qZA(),e.qZA())}function we(a,n){if(1&a&&(e.TgZ(0,"td",40),e._uU(1),e.qZA()),2&a){const t=n.$implicit,o=e.oxw();e.xp6(1),e.hij(" ",o.getAddressSubstring(t.originatingAddressLabel,",")," ")}}function Pe(a,n){1&a&&(e.TgZ(0,"th",38),e.TgZ(1,"p",53),e._uU(2,"Destination Address"),e.qZA(),e.qZA())}function Be(a,n){if(1&a&&(e.TgZ(0,"td",40),e._uU(1),e.qZA()),2&a){const t=n.$implicit,o=e.oxw();e.xp6(1),e.hij(" ",o.getAddressSubstring(t.destinationAddressLabel,",")," ")}}function Je(a,n){1&a&&(e.TgZ(0,"th",38),e.TgZ(1,"p",54),e._uU(2,"Photo"),e.qZA(),e.qZA())}function Fe(a,n){if(1&a&&(e.TgZ(0,"td",40),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.xp6(1),e.hij(" ",t.avatar," ")}}function Qe(a,n){1&a&&(e.TgZ(0,"th",38),e.TgZ(1,"p",55),e._uU(2,"Status"),e.qZA(),e.qZA())}function We(a,n){if(1&a&&(e.TgZ(0,"td",40),e._uU(1),e.qZA()),2&a){const t=n.$implicit;e.xp6(1),e.hij(" ",t.status?t.status.description:""," ")}}function He(a,n){1&a&&e._UZ(0,"tr",56)}function je(a,n){1&a&&e._UZ(0,"tr",57)}const Re=function(){return[5,10,25,100]};let ze=(()=>{class a{constructor(t,o,l,c,g,q,U,M){this.dialog=t,this._formBuilder=o,this.apiService=l,this._snackBar=c,this.variableService=g,this._router=q,this.fuseSplashScreenService=U,this.fuseConfirmationService=M,this.timestamp=0,this.loading=!0,this.vehicleList=[],this.statusList=[],this.vehicleCategoryList=[],this.vehicleTypeList=[],this.theFile=null,this.messages=[],this.fuseSplashScreenService.show(),this.loading=!0,this.displayedColumns=["cud","vehicleTypeDescription","availableFrom","availableTo"]}ngOnInit(){this.getStatusses().then(t=>{this.statusList=t,this.getVehicleCategories().then(o=>{this.vehicleCategoryList=o,this.getVehicleTypes().then(l=>{this.vehicleTypeList=l,this.getVehicles().then(c=>{this.variableService.setPageSelected("Vehicles"),this.vehicleList=c,this.dataSource=new f.by(this.vehicleList),this.fuseSplashScreenService.hide(),this.loading=!1})})})})}getVehicles(){return new Promise(o=>{try{this.apiService.get("vehicles").subscribe({next:l=>{1==l.result?o(l.data):"Expired"==l.message?this._router.navigate(["/sign-out"]):(this._snackBar.open("Error: "+l.message,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1)},error:l=>{console.log(l),this._snackBar.open("Error: "+l,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1},complete:()=>{}})}catch(l){o([])}})}getVehicleCategories(){return new Promise(o=>{try{this.apiService.get("vehicleCategories").subscribe({next:l=>{1==l.result?o(l.data):"Expired"==l.message?this._router.navigate(["/sign-out"]):(this._snackBar.open("Error: "+l.message,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1)},error:l=>{console.log(l),this._snackBar.open("Error: "+l,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1},complete:()=>{}})}catch(l){o([])}})}getVehicleTypes(){return new Promise(o=>{try{this.apiService.get("vehicleTypes").subscribe({next:l=>{1==l.result?o(l.data):"Expired"==l.message?this._router.navigate(["/sign-out"]):(this._snackBar.open("Error: "+l.message,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1)},error:l=>{console.log(l),this._snackBar.open("Error: "+l,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1},complete:()=>{}})}catch(l){o([])}})}getStatusses(){return new Promise(o=>{try{this.apiService.get("status").subscribe({next:l=>{1==l.result?o(l.data):"Expired"==l.message?this._router.navigate(["/sign-out"]):(this._snackBar.open("Error: "+l.message,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1)},error:l=>{console.log(l),this._snackBar.open("Error: "+l,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1},complete:()=>{}})}catch(l){o([])}})}initUpsert(t){this.form=this._formBuilder.group({id:[null==t?D.i.create().toString():t.id],userId:[null==t?localStorage.getItem("userId"):t.userId],vehicleCategoryId:[null==t?null:t.vehicleCategoryId],vehicleTypeId:[null==t?null:t.vehicleTypeId,r.kI.required],vehicleTypeDescription:[null==t?null:t.vehicleTypeDescription],description:[null==t?null:t.description,r.kI.required],registrationNumber:[null==t?null:t.registrationNumber,r.kI.required],maxLoadWeight:[null==t?null:t.maxLoadWeight,r.kI.required],maxLoadHeight:[null==t?null:t.maxLoadHeight,r.kI.required],maxLoadWidth:[null==t?null:t.maxLoadWidth,r.kI.required],maxLoadLength:[null==t?null:t.maxLoadLength,r.kI.required],maxLoadVolume:[null==t?null:t.maxLoadVolume,r.kI.required],availableCapacity:[null==t?null:t.availableCapacity,r.kI.required],availableFrom:[null==t?null:t.availableFrom],availableTo:[null==t?null:t.availableTo],originatingAddressLabel:[null==t?null:t.originatingAddressLabel,r.kI.required],originatingAddressLat:[null==t?null:t.originatingAddressLat,r.kI.required],originatingAddressLon:[null==t?null:t.originatingAddressLon,r.kI.required],destinationAddressLabel:[null==t?null:t.destinationAddressLabel],destinationAddressLat:[null==t?null:t.destinationAddressLat],destinationAddressLon:[null==t?null:t.destinationAddressLon],avatar:[null==t?null:t.avatar],avatarChanged:[!1],fileToUpload:[null],statusId:[null==t?D.i.parse("982FCF45-4BE2-4DE8-8BCD-8E0A564206B2").toString():t.statusId],statusDescription:[null==t?null:t.statusDescription]});const o=new i.vA;o.data={item:t,form:this.form,vehicleCategoryList:this.vehicleCategoryList,vehicleTypeList:this.vehicleTypeList,statusList:this.statusList,originatingAddressLabel:null==t?null:t.originatingAddressLabel,originatingAddressLat:null==t?null:t.originatingAddressLat,originatingAddressLon:null==t?null:t.originatingAddressLon,destinationAddressLabel:null==t?null:t.destinationAddressLabel,destinationAddressLat:null==t?null:t.destinationAddressLat,destinationAddressLon:null==t?null:t.destinationAddressLon,title:null==t?"Insert":"Update"},o.autoFocus=!0,o.disableClose=!0,o.hasBackdrop=!0,o.ariaLabel="fffff",o.width="800px",this.dialog.open(oe,o).afterClosed().subscribe(c=>{!1!==c&&(this.fuseSplashScreenService.show(),this.loading=!0,null==t?this.apiService.post("vehicles",null,c).subscribe({next:g=>{1==g.result?"00000000-0000-0000-0000-000000000000"!=g.id&&c.fileToUpload?this.uploadFile(c.fileToUpload,g.id+"."+c.fileToUpload.name.split(".").pop()).then(q=>{g.data.avatar="."+c.fileToUpload.name.split(".").pop(),this.vehicleList.push(g.data),this.dataSource=new f.by(this.vehicleList),this.fuseSplashScreenService.hide(),this.loading=!1,this.timestamp=(new Date).getTime()}):(this.vehicleList.push(g.data),this.dataSource=new f.by(this.vehicleList),this.fuseSplashScreenService.hide(),this.loading=!1):"Expired"==g.message?this._router.navigate(["/sign-out"]):(this._snackBar.open("Error: "+g.message,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1)},error:g=>{console.log(g),this._snackBar.open("Error: "+g,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1},complete:()=>{}}):this.apiService.put("vehicles",c).subscribe({next:g=>{if(1==g.result)if("00000000-0000-0000-0000-000000000000"!=g.id&&c.fileToUpload)this.uploadFile(c.fileToUpload,g.id+"."+c.fileToUpload.name.split(".").pop()).then(q=>{g.data.avatar="."+c.fileToUpload.name.split(".").pop();let U=this.vehicleList.findIndex(M=>M.id===t.id);this.vehicleList[U]=g.data,this.dataSource=new f.by(this.vehicleList),this.fuseSplashScreenService.hide(),this.loading=!1,this.timestamp=(new Date).getTime()});else{let q=this.vehicleList.findIndex(U=>U.id===t.id);this.vehicleList[q]=g.data,this.dataSource=new f.by(this.vehicleList),this.fuseSplashScreenService.hide(),this.loading=!1}else"Expired"==g.message?this._router.navigate(["/sign-out"]):(this._snackBar.open("Error: "+g.message,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1)},error:g=>{console.log(g),this._snackBar.open("Error: "+g,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1},complete:()=>{}}))})}initDelete(t){this.deleteForm=this._formBuilder.group({title:"Delete Vehicle",message:"Are you sure you want to remove this Vehicle",icon:this._formBuilder.group({show:!0,name:"heroicons_outline:exclamation",color:"warn"}),actions:this._formBuilder.group({confirm:this._formBuilder.group({show:!0,label:"Remove",color:"warn"}),cancel:this._formBuilder.group({show:!0,label:"Cancel"})}),dismissible:!0}),this.fuseConfirmationService.open(this.deleteForm.value).afterClosed().subscribe(l=>{"confirmed"===l&&(this.fuseSplashScreenService.show(),this.loading=!0,this.apiService.delete("vehicles",t).subscribe({next:c=>{1==c.result?(this.vehicleList.splice(this.vehicleList.findIndex(g=>g.id===c.id),1),this.dataSource=new f.by(this.vehicleList),this.fuseSplashScreenService.hide(),this.loading=!1):"Expired"==c.message?this._router.navigate(["/sign-out"]):(this._snackBar.open("Error: "+c.message,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1)},error:c=>{console.log(c),this._snackBar.open("Error: "+c,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1},complete:()=>{}}))})}uploadFile(t,o){return new Promise(c=>{try{const g=new FormData;g.append("file",t),this.apiService.upload("vehicles",g,o).subscribe(q=>{q.type===ne.dt.Response&&c(!0)})}catch(g){c(!1)}})}getAddressSubstring(t,o){let l=t.split(o);return l.length>1?l[0]+","+l[1]:t}}return a.\u0275fac=function(t){return new(t||a)(e.Y36(i.uw),e.Y36(r.qu),e.Y36(v.s),e.Y36(u.ux),e.Y36(le.S),e.Y36(_.F0),e.Y36(re.j),e.Y36(se.R))},a.\u0275cmp=e.Xpm({type:a,selectors:[["vehicles"]],viewQuery:function(t,o){if(1&t&&(e.Gf(m.NW,5),e.Gf(A.YE,5)),2&t){let l;e.iGM(l=e.CRH())&&(o.paginatorVehicle=l.first),e.iGM(l=e.CRH())&&(o.sortVehicle=l.first)}},decls:63,vars:8,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],["fusePerfectScrollbar","",1,"page-layout","blank","p-4"],[1,"grid","grid-cols-1","sm:grid-cols-6","gap-6","w-full","min-w-0"],[1,"sm:col-span-4","lg:col-span-4","flex","flex-col","flex-auto","p-6","overflow-hidden",2,"padding","0!important"],[1,"table-container","bg-card","shadow","rounded-2xl"],[1,"mat-elevation-z5",2,"padding","4px!important"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","cud"],["mat-header-cell","","class","cudColumnExtra ml-0 pl-12","style","padding-left: 0px!important;",4,"matHeaderCellDef"],["mat-cell","","class","cudColumnExtra ml-0 pl-12","style","padding-left: 0px!important;",4,"matCellDef"],["matColumnDef","userDescription"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","table-cell",4,"matCellDef"],["matColumnDef","vehicleTypeDescription"],["matColumnDef","description"],["matColumnDef","registrationNumber"],["matColumnDef","maxLoadWeight"],["matColumnDef","maxLoadHeight"],["matColumnDef","maxLoadWidth"],["matColumnDef","maxLoadLength"],["matColumnDef","maxLoadVolume"],["matColumnDef","availableCapacity"],["matColumnDef","availableFrom"],["matColumnDef","availableTo"],["matColumnDef","originatingAddressLabel"],["matColumnDef","destinationAddressLabel"],["matColumnDef","avatar"],["matColumnDef","statusDescription"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions","pageSize","disabled"],[1,"sm:col-span-2","lg:col-span-2","flex","flex-col","flex-auto","p-6","overflow-hidden",2,"padding","0!important"],["mat-header-cell","",1,"cudColumnExtra","ml-0","pl-12",2,"padding-left","0px!important"],["mat-icon-button","","color","default","matTooltip","Add Vehicle",3,"disabled","click"],[1,"fab-icon"],["mat-cell","",1,"cudColumnExtra","ml-0","pl-12",2,"padding-left","0px!important"],["mat-icon-button","","color","default","matTooltip","Update Vehicle",3,"disabled","click"],["mat-icon-button","","color","default","matTooltip","Remove Vehicle",3,"disabled","click"],["mat-header-cell",""],["mat-sort-header","userDescription",1,"table-header"],["mat-cell","",1,"table-cell"],["mat-sort-header","vehicleTypeDescription",1,"table-header"],["mat-sort-header","description",1,"table-header"],["mat-sort-header","registrationNumber",1,"table-header"],["mat-sort-header","maxLoadWeight",1,"table-header"],["mat-sort-header","maxLoadHeight",1,"table-header"],["mat-sort-header","maxLoadWidth",1,"table-header"],["mat-sort-header","maxLoadLength",1,"table-header"],["mat-sort-header","maxLoadVolume",1,"table-header"],["mat-sort-header","availableCapacity",1,"table-header"],["mat-sort-header","availableFrom",1,"table-header"],["mat-sort-header","availableTo",1,"table-header"],["mat-sort-header","originatingAddressLabel",1,"table-header"],["mat-sort-header","destinationAddressLabel",1,"table-header"],["mat-sort-header","avatar",1,"table-header"],["mat-sort-header","statusDescription",1,"table-header"],["mat-header-row",""],["mat-row",""]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e.TgZ(1,"div",1),e.TgZ(2,"div",2),e.TgZ(3,"div",3),e.TgZ(4,"div",4),e.TgZ(5,"mat-card",5),e.TgZ(6,"table",6),e.ynx(7,7),e.YNc(8,ge,4,1,"th",8),e.YNc(9,he,7,2,"td",9),e.BQk(),e.ynx(10,10),e.YNc(11,pe,3,0,"th",11),e.YNc(12,ue,2,1,"td",12),e.BQk(),e.ynx(13,13),e.YNc(14,fe,3,0,"th",11),e.YNc(15,_e,2,1,"td",12),e.BQk(),e.ynx(16,14),e.YNc(17,xe,3,0,"th",11),e.YNc(18,ve,2,1,"td",12),e.BQk(),e.ynx(19,15),e.YNc(20,Ze,3,0,"th",11),e.YNc(21,Te,2,1,"td",12),e.BQk(),e.ynx(22,16),e.YNc(23,Ae,3,0,"th",11),e.YNc(24,Ce,3,3,"td",12),e.BQk(),e.ynx(25,17),e.YNc(26,be,3,0,"th",11),e.YNc(27,Le,3,3,"td",12),e.BQk(),e.ynx(28,18),e.YNc(29,ye,3,0,"th",11),e.YNc(30,qe,3,3,"td",12),e.BQk(),e.ynx(31,19),e.YNc(32,De,3,0,"th",11),e.YNc(33,Ue,3,3,"td",12),e.BQk(),e.ynx(34,20),e.YNc(35,Ve,3,0,"th",11),e.YNc(36,Se,3,3,"td",12),e.BQk(),e.ynx(37,21),e.YNc(38,Ie,3,0,"th",11),e.YNc(39,Ee,3,3,"td",12),e.BQk(),e.ynx(40,22),e.YNc(41,Me,3,0,"th",11),e.YNc(42,Ne,3,3,"td",12),e.BQk(),e.ynx(43,23),e.YNc(44,ke,3,0,"th",11),e.YNc(45,Oe,3,3,"td",12),e.BQk(),e.ynx(46,24),e.YNc(47,Ye,3,0,"th",11),e.YNc(48,we,2,1,"td",12),e.BQk(),e.ynx(49,25),e.YNc(50,Pe,3,0,"th",11),e.YNc(51,Be,2,1,"td",12),e.BQk(),e.ynx(52,26),e.YNc(53,Je,3,0,"th",11),e.YNc(54,Fe,2,1,"td",12),e.BQk(),e.ynx(55,27),e.YNc(56,Qe,3,0,"th",11),e.YNc(57,We,2,1,"td",12),e.BQk(),e.YNc(58,He,1,0,"tr",28),e.YNc(59,je,1,0,"tr",29),e.qZA(),e._UZ(60,"mat-paginator",30),e.qZA(),e.qZA(),e.qZA(),e.TgZ(61,"div",31),e._UZ(62,"advert"),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&t&&(e.xp6(6),e.Q6J("dataSource",o.dataSource),e.xp6(52),e.Q6J("matHeaderRowDef",o.displayedColumns)("matHeaderRowDefSticky",!0),e.xp6(1),e.Q6J("matRowDefColumns",o.displayedColumns),e.xp6(1),e.Q6J("pageSizeOptions",e.DdM(7,Re))("pageSize",10)("disabled",o.loading))},directives:[ce.a8,f.BZ,A.YE,f.w1,f.fO,f.Dz,f.as,f.nj,m.NW,de.I,f.ge,E.lW,me.gM,N.Hw,f.ev,A.nU,f.XQ,f.Gk],pipes:[h.JJ,h.uU],encapsulation:2}),a})();var $e=s(6038);const Ke=[{path:"",component:ze}];let Ge=(()=>{class a{}return a.\u0275fac=function(t){return new(t||a)},a.\u0275mod=e.oAB({type:a}),a.\u0275inj=e.cJS({imports:[[_.Bz.forChild(Ke),$e.m]]}),a})()},3098:(I,b)=>{var _=function(){function r(i){if(!i)throw new TypeError("Invalid argument; `value` has no value.");this.value=r.EMPTY,i&&r.isGuid(i)&&(this.value=i)}return r.isGuid=function(i){var m=i.toString();return i&&(i instanceof r||r.validator.test(m))},r.create=function(){return new r([r.gen(2),r.gen(1),r.gen(1),r.gen(1),r.gen(3)].join("-"))},r.createEmpty=function(){return new r("emptyguid")},r.parse=function(i){return new r(i)},r.raw=function(){return[r.gen(2),r.gen(1),r.gen(1),r.gen(1),r.gen(3)].join("-")},r.gen=function(i){for(var m="",A=0;A<i;A++)m+=(65536*(1+Math.random())|0).toString(16).substring(1);return m},r.prototype.equals=function(i){return r.isGuid(i)&&this.value===i.toString()},r.prototype.isEmpty=function(){return this.value===r.EMPTY},r.prototype.toString=function(){return this.value},r.prototype.toJSON=function(){return{value:this.value}},r.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),r.EMPTY="00000000-0000-0000-0000-000000000000",r}();b.i=_}}]);