"use strict";(self.webpackChunkloadgistix=self.webpackChunkloadgistix||[]).push([[63],{1708:(O,I,s)=>{s.d(I,{I:()=>c});var D=s(7445),r=s(2340),e=s(5e3),A=s(8279),Z=s(7261),p=s(6407),U=s(8951),w=s(4521),y=s(9808),C=s(9224);function t(g,_){if(1&g&&e._UZ(0,"img",7),2&g){const m=e.oxw().$implicit,v=e.oxw(2);e.Q6J("src",v.imagesFolder+"Adverts/"+m.id+m.avatar+"?t="+v.timestamp,e.LSH)}}function k(g,_){if(1&g&&(e.TgZ(0,"mat-card",3),e.TgZ(1,"mat-card-title-group"),e.TgZ(2,"mat-card-title",4),e._uU(3),e.qZA(),e.TgZ(4,"mat-card-subtitle"),e._uU(5),e.qZA(),e.YNc(6,t,1,1,"img",5),e.qZA(),e.TgZ(7,"mat-card-content"),e._uU(8),e._UZ(9,"br"),e._UZ(10,"br"),e.TgZ(11,"a",6),e._uU(12),e.qZA(),e.qZA(),e.qZA()),2&g){const m=_.$implicit;e.xp6(3),e.Oqu(m.title),e.xp6(2),e.Oqu(m.subTitle),e.xp6(1),e.Q6J("ngIf",m.avatar),e.xp6(2),e.hij(" ",m.content,""),e.xp6(3),e.Q6J("href",m.link,e.LSH),e.xp6(1),e.Oqu(m.link)}}function u(g,_){if(1&g&&(e.ynx(0),e.YNc(1,k,13,6,"mat-card",2),e.BQk()),2&g){const m=e.oxw();e.xp6(1),e.Q6J("ngForOf",m.advertItems)}}function T(g,_){1&g&&(e.TgZ(0,"mat-card",3),e.TgZ(1,"mat-card-title-group"),e.TgZ(2,"mat-card-title",4),e._uU(3,"Loadgistix"),e.qZA(),e.TgZ(4,"mat-card-subtitle"),e._uU(5,"Get more"),e.qZA(),e._UZ(6,"img",8),e.qZA(),e.TgZ(7,"mat-card-content"),e._uU(8," Contact us today - we will show you how to get the best out of Loadgistix! "),e.qZA(),e.qZA())}let c=(()=>{class g{constructor(m,v,x,P,q){this.apiService=m,this._snackBar=v,this.variableService=x,this.authService=P,this._router=q,this.timestamp=0,this.imagesFolder=r.N.api+"Images/",this.loading=!0,this.advertItems=[],this.timestamp=(new Date).getTime()}ngOnInit(){this.getAdverts().then(v=>{this.advertItems=v});const m=(0,D.F)(6e5);this.subscription=m.subscribe(v=>{this.authService.check().subscribe(x=>{x&&this.getAdverts().then(P=>{this.advertItems=P,this.timestamp=(new Date).getTime()})})})}getAdverts(){return new Promise(v=>{try{this.apiService.post("adverts","available",null).subscribe({next:x=>{1==x.result?v(x.data):"Expired"==x.message?this._router.navigate(["/sign-out"]):this._snackBar.open("Error: "+x.message,null,{duration:2e3})},error:x=>{console.log(x),this._snackBar.open("Error: "+x,null,{duration:2e3})},complete:()=>{}})}catch(x){v([])}})}}return g.\u0275fac=function(m){return new(m||g)(e.Y36(A.s),e.Y36(Z.ux),e.Y36(p.S),e.Y36(U.e),e.Y36(w.F0))},g.\u0275cmp=e.Xpm({type:g,selectors:[["advert"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden","style","margin-bottom: 12px;",4,"ngIf"],["class","flex flex-col flex-auto p-6 bg-card shadow rounded-2xl overflow-hidden","style","margin-bottom: 12px;",4,"ngFor","ngForOf"],[1,"flex","flex-col","flex-auto","p-6","bg-card","shadow","rounded-2xl","overflow-hidden",2,"margin-bottom","12px"],[2,"font-size","18px"],["mat-card-sm-image","",3,"src",4,"ngIf"],["target","_blank",3,"href"],["mat-card-sm-image","",3,"src"],["mat-card-sm-image","","src","assets/images/no-image.jpg"]],template:function(m,v){1&m&&(e.YNc(0,u,2,1,"ng-container",0),e.YNc(1,T,9,0,"mat-card",1)),2&m&&(e.Q6J("ngIf",v.advertItems.length>0),e.xp6(1),e.Q6J("ngIf",0===v.advertItems.length))},directives:[y.O5,y.sg,C.a8,C.C1,C.n5,C.$j,C.dn,C.vP],styles:[".mat-card-sm-image[_ngcontent-%COMP%]{max-width:120px;max-height:120px;width:auto;height:auto}"]}),g})()},7738:(O,I,s)=>{s.d(I,{_:()=>k});var D=s(7295),r=s(7579),e=s(5e3),A=s(8966),Z=s(9808),p=s(7423);function U(u,T){if(1&u){const c=e.EpF();e.TgZ(0,"webcam",11),e.NdJ("imageCapture",function(_){return e.CHM(c),e.oxw(2).handleImage(_)}),e.qZA()}if(2&u){const c=e.oxw(2);e.Q6J("height",500)("width",1e3)("trigger",c.triggerObservable)("switchCamera",c.nextWebcamObservable)}}function w(u,T){if(1&u&&(e.TgZ(0,"ul"),e.TgZ(1,"li"),e._uU(2),e.ALo(3,"json"),e.qZA(),e.qZA()),2&u){const c=T.$implicit;e.xp6(2),e.Oqu(e.lcZ(3,1,c))}}function y(u,T){if(1&u&&(e.TgZ(0,"div"),e.TgZ(1,"h4"),e._uU(2,"Error Messages:"),e.qZA(),e.YNc(3,w,4,3,"ul",12),e.qZA()),2&u){const c=e.oxw(2);e.xp6(3),e.Q6J("ngForOf",c.errors)}}function C(u,T){if(1&u&&(e.TgZ(0,"div"),e.TgZ(1,"div",8),e.YNc(2,U,1,4,"webcam",9),e.qZA(),e.YNc(3,y,4,1,"div",10),e.qZA()),2&u){const c=e.oxw();e.xp6(2),e.Q6J("ngIf",c.showWebcam),e.xp6(1),e.Q6J("ngIf",c.errors.length>0)}}function t(u,T){1&u&&e._uU(0," Camera device not available ")}let k=(()=>{class u{constructor(c){this.dialogRef=c,this.showWebcam=!0,this.isCameraExist=!0,this.errors=[],this.trigger=new r.x,this.nextWebcam=new r.x}ngOnInit(){D.BF.getAvailableVideoInputs().then(c=>{this.isCameraExist=c&&c.length>0})}takeSnapshot(){this.trigger.next()}onOffWebCame(){this.showWebcam=!this.showWebcam}handleInitError(c){this.errors.push(c)}changeWebCame(c){this.nextWebcam.next(c)}handleImage(c){this.dialogRef.close(c)}get triggerObservable(){return this.trigger.asObservable()}get nextWebcamObservable(){return this.nextWebcam.asObservable()}cancel(){this.dialogRef.close(null)}}return u.\u0275fac=function(c){return new(c||u)(e.Y36(A.so))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-camera"]],decls:12,vars:2,consts:[["mat-dialog-title","",1,"accent","dialog-title","bg-primary","text-on-primary","text-secondary",2,"margin-bottom","0px !important"],["mat-dialog-content","",2,"padding","0!important"],[4,"ngIf","ngIfElse"],["noCameraExist",""],["mat-dialog-actions","",1,"dialog-footer",2,"margin-top","0px !important"],[2,"flex","1 1 auto"],["mat-raised-button","","color","warn",3,"click"],["mat-raised-button","","color","primary",3,"click"],[2,"text-align","center"],[3,"height","width","trigger","switchCamera","imageCapture",4,"ngIf"],[4,"ngIf"],[3,"height","width","trigger","switchCamera","imageCapture"],[4,"ngFor","ngForOf"]],template:function(c,g){if(1&c&&(e.TgZ(0,"h1",0),e._uU(1,"Take Photo"),e.qZA(),e.TgZ(2,"div",1),e.YNc(3,C,4,2,"div",2),e.YNc(4,t,1,0,"ng-template",null,3,e.W1O),e.qZA(),e.TgZ(6,"div",4),e._UZ(7,"span",5),e.TgZ(8,"button",6),e.NdJ("click",function(){return g.cancel()}),e._uU(9,"Cancel"),e.qZA(),e.TgZ(10,"button",7),e.NdJ("click",function(){return g.takeSnapshot()}),e._uU(11,"Take Photo"),e.qZA(),e.qZA()),2&c){const _=e.MAs(5);e.xp6(3),e.Q6J("ngIf",g.isCameraExist)("ngIfElse",_)}},directives:[A.uh,A.xY,Z.O5,A.H8,p.lW,D.i3,Z.sg],pipes:[Z.Ts],styles:[".button[_ngcontent-%COMP%]{color:#fff;background-color:#00f;padding:4px;text-align:center;text-decoration:none;display:inline-block;font-size:16px;margin:4px 2px;transition-duration:.4s;cursor:pointer;border-radius:2px}ul.links[_ngcontent-%COMP%]{padding-bottom:10px}"]}),u})()},3063:(O,I,s)=>{s.r(I),s.d(I,{AdvertsModule:()=>_t});var D=s(4521),r=s(3075),e=s(8966),A=s(6087),Z=s(4847),p=s(4999),U=s(3098),w=s(7579),y=s(7738),C=s(2340),t=s(5e3),k=s(7261),u=s(6362),T=s(8279),c=s(7093),g=s(7322),_=s(4107),m=s(9808),v=s(7531),x=s(7423),P=s(508);function q(i,l){if(1&i&&(t.TgZ(0,"mat-option",26),t._uU(1),t.qZA()),2&i){const a=l.$implicit;t.Q6J("value",a.id),t.xp6(1),t.Oqu(a.description)}}function Y(i,l){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"Title is required"),t.qZA())}function F(i,l){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"Sub-Title is required"),t.qZA())}function B(i,l){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"Content is required"),t.qZA())}function J(i,l){1&i&&(t.TgZ(0,"mat-error"),t._uU(1,"Link is required"),t.qZA())}function Q(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"img",27),t.NdJ("click",function(){return t.CHM(a),t.oxw(),t.MAs(39).click()}),t.qZA()}if(2&i){const a=t.oxw();t.Q6J("src",a.previewImage,t.LSH)}}function W(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"img",27),t.NdJ("click",function(){return t.CHM(a),t.oxw(),t.MAs(39).click()}),t.qZA()}if(2&i){const a=t.oxw();t.Q6J("src",a.imagesFolder+"Adverts/"+a.form.value.id+a.form.value.avatar+"?t="+a.timestamp,t.LSH)}}function j(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"img",28),t.NdJ("click",function(){return t.CHM(a),t.oxw(),t.MAs(39).click()}),t.qZA()}}let H=(()=>{class i{constructor(a,n,o,d,f,E){this.dialog=a,this.dialogRef=n,this.data=o,this._snackBar=d,this.fuseSplashScreenService=f,this.apiService=E,this.timestamp=0,this.imagesFolder=C.N.api+"Images/",this.loading=!0,this.previewImage=null,this.hasError=(b,L)=>this.form.controls[b].hasError(L),this.timestamp=(new Date).getTime(),this.formErrors=o.formErrors,this.formData=o,this._unsubscribeAll=new w.x}ngOnInit(){this.form=this.data.form,this.formValid=!1,this.loading=!1}handleFileInput(a){this.fileToUpload=a.item(0),this.form.controls.fileToUpload.setValue(this.fileToUpload);var n=(this.fileToUpload.size/1048576).toFixed(2);if(Number(n)>Number(.25))return this._snackBar.open("Error: Maximum FileSize is 200kB",null,{duration:2e3}),!1;{let o=new FileReader;o.onload=d=>{this.previewImage=d.target.result},o.readAsDataURL(this.fileToUpload)}}initCamera(){const a=new e.vA;a.autoFocus=!0,a.disableClose=!0,a.hasBackdrop=!0,a.ariaLabel="fffff",a.width="800px",this.dialog.open(y._,a).afterClosed().subscribe(o=>{o&&(this.form.controls.avatar.setValue(o._imageAsDataUrl),this.previewImage=o._imageAsDataUrl,this.form.controls.avatarChanged.setValue(!0))})}onNoClick(){this.dialogRef.close(!1)}onYesClick(){setTimeout(()=>{this.dialogRef.close(this.form.value)},100)}}return i.\u0275fac=function(a){return new(a||i)(t.Y36(e.uw),t.Y36(e.so),t.Y36(e.WI),t.Y36(k.ux),t.Y36(u.j),t.Y36(T.s))},i.\u0275cmp=t.Xpm({type:i,selectors:[["dialog-advert"]],decls:54,vars:11,consts:[["mat-dialog-title","",1,"accent","dialog-title","bg-primary","text-on-primary","text-secondary"],["mat-dialog-content","","fxLayout","column"],["fxLayout","column","fxLayoutAlign","start","fxFlex","1 0 auto","name","form","novalidate","",1,"mat-white-bg","w-100-p",2,"padding","0px!important",3,"formGroup"],["fxLayout","row wrap",1,"w-100-p"],["fxFlex","100","fxFlex.gt-xs","50",1,"p-4",2,"padding","0px!important"],["appearance","outline",1,"w-100-p"],["placeholder","Advert Package","formControlName","advertPackageId"],[3,"value",4,"ngFor","ngForOf"],["matInput","","placeholder","Title","maxlength","20","formControlName","title","id","title"],[4,"ngIf"],["matInput","","placeholder","Sub-Title","maxlength","50","formControlName","subTitle","id","subTitle"],["matInput","","placeholder","Content","maxlength","200","formControlName","content","id","content"],["matInput","","placeholder","Link","formControlName","link","id","link"],["fxFlex","100","fxFlex.gt-xs","50","fxLayout","row","fxLayoutAlign","center center",1,"p-4"],["id","fileInput","type","file","accept",".jpg,.png,.jpeg",2,"display","none",3,"click","change"],["Image",""],["fxFlex","","fxLayout","column"],["fxFlex","","fxLayout","row"],["mat-flat-button","","fxFlex","100","color","primary",2,"margin-left","2px","margin-right","2px",3,"click"],["fxFlex","","fxLayout","row","fxLayoutAlign","center center",2,"margin-top","4px"],["style","max-width: 120px;max-height: 120px;width: auto;height: auto;","class","image",3,"src","click",4,"ngIf"],["style","max-width: 120px;max-height: 120px;width: auto;height: auto;","src","assets/images/no-image.jpg","class","image",3,"click",4,"ngIf"],["mat-dialog-actions","",1,"dialog-footer"],[2,"flex","1 1 auto"],["mat-flat-button","","color","warn",3,"click"],["mat-flat-button","","color","primary",3,"disabled","click"],[3,"value"],[1,"image",2,"max-width","120px","max-height","120px","width","auto","height","auto",3,"src","click"],["src","assets/images/no-image.jpg",1,"image",2,"max-width","120px","max-height","120px","width","auto","height","auto",3,"click"]],template:function(a,n){if(1&a){const o=t.EpF();t.TgZ(0,"h1",0),t._uU(1),t.qZA(),t.TgZ(2,"div",1),t.TgZ(3,"form",2),t.TgZ(4,"div",3),t.TgZ(5,"div",4),t.TgZ(6,"mat-form-field",5),t.TgZ(7,"mat-label"),t._uU(8,"Advert Package"),t.qZA(),t.TgZ(9,"mat-select",6),t.YNc(10,q,2,2,"mat-option",7),t.qZA(),t.TgZ(11,"mat-error"),t._uU(12,"Advert Package is required"),t.qZA(),t.qZA(),t.qZA(),t.TgZ(13,"div",4),t.TgZ(14,"mat-form-field",5),t.TgZ(15,"mat-label"),t._uU(16,"Title"),t.qZA(),t._UZ(17,"input",8),t.YNc(18,Y,2,0,"mat-error",9),t.qZA(),t.qZA(),t.TgZ(19,"div",4),t.TgZ(20,"mat-form-field",5),t.TgZ(21,"mat-label"),t._uU(22,"Sub-Title"),t.qZA(),t._UZ(23,"input",10),t.YNc(24,F,2,0,"mat-error",9),t.qZA(),t.qZA(),t.TgZ(25,"div",4),t.TgZ(26,"mat-form-field",5),t.TgZ(27,"mat-label"),t._uU(28,"Content"),t.qZA(),t._UZ(29,"input",11),t.YNc(30,B,2,0,"mat-error",9),t.qZA(),t.qZA(),t.TgZ(31,"div",4),t.TgZ(32,"mat-form-field",5),t.TgZ(33,"mat-label"),t._uU(34,"Link"),t.qZA(),t._UZ(35,"input",12),t.YNc(36,J,2,0,"mat-error",9),t.qZA(),t.qZA(),t.TgZ(37,"div",13),t.TgZ(38,"input",14,15),t.NdJ("click",function(){return t.CHM(o),t.MAs(39).value=null})("change",function(f){return n.handleFileInput(f.target.files)}),t.qZA(),t.TgZ(40,"div",16),t.TgZ(41,"div",17),t.TgZ(42,"button",18),t.NdJ("click",function(){return t.CHM(o),t.MAs(39).click()}),t._uU(43,"Upload Image"),t.qZA(),t.qZA(),t.TgZ(44,"div",19),t.YNc(45,Q,1,1,"img",20),t.YNc(46,W,1,1,"img",20),t.YNc(47,j,1,0,"img",21),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(48,"div",22),t._UZ(49,"span",23),t.TgZ(50,"button",24),t.NdJ("click",function(){return n.onNoClick()}),t._uU(51,"Cancel"),t.qZA(),t.TgZ(52,"button",25),t.NdJ("click",function(){return n.onYesClick()}),t._uU(53,"Submit"),t.qZA(),t.qZA()}2&a&&(t.xp6(1),t.hij("",n.formData.title," Advert\n"),t.xp6(2),t.Q6J("formGroup",n.form),t.xp6(7),t.Q6J("ngForOf",n.formData.advertPackageList),t.xp6(8),t.Q6J("ngIf",n.hasError("title","required")),t.xp6(6),t.Q6J("ngIf",n.hasError("subTitle","required")),t.xp6(6),t.Q6J("ngIf",n.hasError("content","required")),t.xp6(6),t.Q6J("ngIf",n.hasError("link","required")),t.xp6(9),t.Q6J("ngIf",n.previewImage),t.xp6(1),t.Q6J("ngIf",!n.previewImage&&n.form.value.avatar),t.xp6(1),t.Q6J("ngIf",!n.previewImage&&!n.form.value.avatar),t.xp6(5),t.Q6J("disabled",!n.form.valid))},directives:[e.uh,e.xY,c.xw,r._Y,r.JL,c.Wh,c.yH,r.sg,g.KE,g.hX,_.gD,r.JJ,r.u,m.sg,g.TO,v.Nt,r.Fj,r.nD,m.O5,x.lW,e.H8,P.ey],encapsulation:2}),i})();var R=s(520),K=s(6407),z=s(1683),G=s(9224),$=s(1708),X=s(7238),V=s(5245);function tt(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"th",23),t.TgZ(1,"button",24),t.NdJ("click",function(){return t.CHM(a),t.oxw().initUpsert(null)}),t.TgZ(2,"mat-icon",25),t._uU(3,"add"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const a=t.oxw();t.xp6(1),t.Q6J("disabled",a.loading)}}function et(i,l){if(1&i){const a=t.EpF();t.TgZ(0,"td",26),t.TgZ(1,"button",27),t.NdJ("click",function(){const d=t.CHM(a).$implicit;return t.oxw().initUpsert(d)}),t.TgZ(2,"mat-icon",25),t._uU(3,"edit"),t.qZA(),t.qZA(),t.TgZ(4,"button",28),t.NdJ("click",function(){const d=t.CHM(a).$implicit;return t.oxw().initDelete(d.id)}),t.TgZ(5,"mat-icon",25),t._uU(6,"delete"),t.qZA(),t.qZA(),t.qZA()}if(2&i){const a=t.oxw();t.xp6(1),t.Q6J("disabled",a.loading),t.xp6(3),t.Q6J("disabled",a.loading)}}function at(i,l){1&i&&(t.TgZ(0,"th",29),t.TgZ(1,"p",30),t._uU(2,"Title"),t.qZA(),t.qZA())}function it(i,l){if(1&i&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&i){const a=l.$implicit;t.xp6(1),t.hij(" ",a.title," ")}}function nt(i,l){1&i&&(t.TgZ(0,"th",29),t.TgZ(1,"p",32),t._uU(2,"Advert Package "),t.qZA(),t.qZA())}function rt(i,l){if(1&i&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&i){const a=l.$implicit;t.xp6(1),t.hij(" ",a.advertPackage?a.advertPackage.description:""," ")}}function ot(i,l){1&i&&(t.TgZ(0,"th",29),t.TgZ(1,"p",33),t._uU(2,"Image"),t.qZA(),t.qZA())}function st(i,l){if(1&i&&t._UZ(0,"img",36),2&i){const a=t.oxw().$implicit,n=t.oxw();t.Q6J("src",n.imagesFolder+"Adverts/"+a.id+a.avatar+"?t="+n.timestamp,t.LSH)}}function lt(i,l){1&i&&t._UZ(0,"img",37)}function ct(i,l){if(1&i&&(t.TgZ(0,"td",31),t.YNc(1,st,1,1,"img",34),t.YNc(2,lt,1,0,"img",35),t.qZA()),2&i){const a=l.$implicit;t.xp6(1),t.Q6J("ngIf",a.avatar),t.xp6(1),t.Q6J("ngIf",!a.avatar)}}function dt(i,l){1&i&&(t.TgZ(0,"th",29),t.TgZ(1,"p",38),t._uU(2,"Status"),t.qZA(),t.qZA())}function mt(i,l){if(1&i&&(t.TgZ(0,"td",31),t._uU(1),t.qZA()),2&i){const a=l.$implicit;t.xp6(1),t.hij(" ",a.status.description," ")}}function gt(i,l){1&i&&t._UZ(0,"tr",39)}function ut(i,l){1&i&&t._UZ(0,"tr",40)}const pt=function(){return[5,10,25,100]};let ht=(()=>{class i{constructor(a,n,o,d,f,E,b,L){this.dialog=a,this._formBuilder=n,this.apiService=o,this._snackBar=d,this.variableService=f,this._router=E,this.fuseSplashScreenService=b,this.fuseConfirmationService=L,this.timestamp=0,this.imagesFolder=C.N.api+"Images/",this.loading=!0,this.advertList=[],this.advertPackageList=[],this.theFile=null,this.messages=[],this.timestamp=(new Date).getTime(),this.fuseSplashScreenService.show(),this.loading=!0,this.displayedColumns=["cud","title","avatar","statusDescription"]}ngOnInit(){this.getAdvertPackages().then(a=>{this.advertPackageList=a,this.getAdverts().then(n=>{this.variableService.setPageSelected("Adverts"),this.advertList=n,this.dataSource=new p.by(this.advertList),this.fuseSplashScreenService.hide(),this.loading=!1})})}getAdverts(){return new Promise(n=>{try{this.apiService.get("adverts").subscribe({next:o=>{1==o.result?n(o.data):"Expired"==o.message?this._router.navigate(["/sign-out"]):(this._snackBar.open("Error: "+o.message,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1)},error:o=>{console.log(o),this._snackBar.open("Error: "+o,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1},complete:()=>{}})}catch(o){n([])}})}getAdvertPackages(){return new Promise(n=>{try{this.apiService.post("advertPackages","all",null).subscribe({next:o=>{1==o.result?n(o.data):"Expired"==o.message?this._router.navigate(["/sign-out"]):(this._snackBar.open("Error: "+o.message,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1)},error:o=>{console.log(o),this._snackBar.open("Error: "+o,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1},complete:()=>{}})}catch(o){n([])}})}applyFilter(a){this.dataSource.filter=a.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}initUpsert(a){var n=new Date,o=n.getFullYear(),d=n.getMonth(),f=n.getDate(),E=new Date(o+1,d,f);this.form=this._formBuilder.group({id:[null==a?U.i.create().toString():a.id],userId:[null==a?localStorage.getItem("userId"):a.userId],dateExpiry:[null==a?E:a.dateExpiry],advertPackageId:[null==a?null:a.advertPackageId,r.kI.required],advertPackageDescription:[null==a?null:a.advertPackageDescription],title:[null==a?null:a.title,[r.kI.required,r.kI.maxLength(20)]],subTitle:[null==a?null:a.subTitle,[r.kI.required,r.kI.maxLength(50)]],link:[null==a?null:a.link,[r.kI.required,r.kI.maxLength(200)]],content:[null==a?null:a.content,[r.kI.required,r.kI.maxLength(200)]],avatar:[null==a?null:a.avatar],avatarChanged:[!1],fileToUpload:[null],statusId:[null==a?U.i.parse("490039A9-3DD3-4265-B998-FB735E2A233C").toString():a.statusId],statusDescription:[null==a?null:a.statusDescription]});const b=new e.vA;b.data={item:a,form:this.form,advertPackageList:this.advertPackageList,title:null==a?"Insert":"Update"},b.autoFocus=!0,b.disableClose=!0,b.hasBackdrop=!0,b.ariaLabel="fffff",b.width="800px",this.dialog.open(H,b).afterClosed().subscribe(S=>{!1!==S&&(this.fuseSplashScreenService.show(),this.loading=!0,null==a?this.apiService.post("adverts",null,S).subscribe({next:h=>{"00000000-0000-0000-0000-000000000000"!=h.id&&S.fileToUpload?this.uploadFile(S.fileToUpload,h.id+"."+S.fileToUpload.name.split(".").pop()).then(M=>{h.data.avatar="."+S.fileToUpload.name.split(".").pop(),this.advertList.push(h.data),this.dataSource=new p.by(this.advertList),this.fuseSplashScreenService.hide(),this.loading=!1,this.timestamp=(new Date).getTime()}):(this.advertList.push(h.data),this.dataSource=new p.by(this.advertList),this.fuseSplashScreenService.hide(),this.loading=!1)},error:h=>{console.log(h),this._snackBar.open("Error: "+h,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1},complete:()=>{}}):this.apiService.put("adverts",S).subscribe({next:h=>{if(1==h.result)if("00000000-0000-0000-0000-000000000000"!=h.id&&S.fileToUpload)this.uploadFile(S.fileToUpload,h.id+"."+S.fileToUpload.name.split(".").pop()).then(M=>{h.data.avatar="."+S.fileToUpload.name.split(".").pop();let N=this.advertList.findIndex(xt=>xt.id===a.id);this.advertList[N]=h.data,this.dataSource=new p.by(this.advertList),this.fuseSplashScreenService.hide(),this.loading=!1,this.timestamp=(new Date).getTime()});else{let M=this.advertList.findIndex(N=>N.id===a.id);this.advertList[M]=h.data,this.dataSource=new p.by(this.advertList),this.fuseSplashScreenService.hide(),this.loading=!1}else"Expired"==h.message?this._router.navigate(["/sign-out"]):(this._snackBar.open("Error: "+h.message,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1)},error:h=>{console.log(h),this._snackBar.open("Error: "+h,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1},complete:()=>{}}))})}initDelete(a){this.deleteForm=this._formBuilder.group({title:"Delete Advert",message:"Are you sure you want to remove this Advert?",icon:this._formBuilder.group({show:!0,name:"heroicons_outline:exclamation",color:"warn"}),actions:this._formBuilder.group({confirm:this._formBuilder.group({show:!0,label:"Remove",color:"warn"}),cancel:this._formBuilder.group({show:!0,label:"Cancel"})}),dismissible:!0}),this.fuseConfirmationService.open(this.deleteForm.value).afterClosed().subscribe(o=>{"confirmed"===o&&(this.fuseSplashScreenService.show(),this.loading=!0,this.apiService.delete("adverts",a).subscribe({next:d=>{1==d.result?(this.advertList.splice(this.advertList.findIndex(f=>f.id===d.id),1),this.dataSource=new p.by(this.advertList),this.fuseSplashScreenService.hide(),this.loading=!1):"Expired"==d.message?this._router.navigate(["/sign-out"]):(this._snackBar.open("Error: "+d.message,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1)},error:d=>{console.log(d),this._snackBar.open("Error: "+d,null,{duration:2e3}),this.fuseSplashScreenService.hide(),this.loading=!1},complete:()=>{}}))})}uploadFile(a,n){return new Promise(d=>{try{const f=new FormData;f.append("file",a),this.apiService.upload("adverts",f,n).subscribe(E=>{E.type===R.dt.Response&&d(!0)})}catch(f){d(!1)}})}getAddressSubstring(a,n){let o=a.split(n);return o.length>1?o[0]+","+o[1]:a}}return i.\u0275fac=function(a){return new(a||i)(t.Y36(e.uw),t.Y36(r.qu),t.Y36(T.s),t.Y36(k.ux),t.Y36(K.S),t.Y36(D.F0),t.Y36(u.j),t.Y36(z.R))},i.\u0275cmp=t.Xpm({type:i,selectors:[["adverts"]],viewQuery:function(a,n){if(1&a&&(t.Gf(A.NW,5),t.Gf(Z.YE,5)),2&a){let o;t.iGM(o=t.CRH())&&(n.paginatorAdvert=o.first),t.iGM(o=t.CRH())&&(n.sortAdvert=o.first)}},decls:30,vars:8,consts:[[1,"flex","flex-col","flex-auto","min-w-0"],["fusePerfectScrollbar","",1,"page-layout","blank","p-4"],[1,"grid","grid-cols-1","sm:grid-cols-6","gap-6","w-full","min-w-0"],[1,"sm:col-span-4","lg:col-span-4","flex","flex-col","flex-auto","p-6","overflow-hidden",2,"padding","0!important"],[1,"mt-0",2,"width","100%"],["matInput","","placeholder","Filter",3,"keyup"],["input",""],[1,"table-container","bg-card","shadow","rounded-2xl"],[1,"mat-elevation-z8",2,"padding","4px!important"],["mat-table","","matSort","",3,"dataSource"],["matColumnDef","cud"],["mat-header-cell","","class","cudColumnExtra ml-0 pl-12","style","padding-left: 0px!important;",4,"matHeaderCellDef"],["mat-cell","","class","cudColumnExtra ml-0 pl-12","style","padding-left: 0px!important;",4,"matCellDef"],["matColumnDef","title"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","","class","table-cell",4,"matCellDef"],["matColumnDef","advertPackageDescription"],["matColumnDef","avatar"],["matColumnDef","statusDescription"],["mat-header-row","",4,"matHeaderRowDef","matHeaderRowDefSticky"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions","pageSize","disabled"],[1,"sm:col-span-2","lg:col-span-2","flex","flex-col","flex-auto","p-6","overflow-hidden",2,"padding","0!important"],["mat-header-cell","",1,"cudColumnExtra","ml-0","pl-12",2,"padding-left","0px!important"],["mat-icon-button","","color","default","matTooltip","Add Advert",3,"disabled","click"],[1,"fab-icon"],["mat-cell","",1,"cudColumnExtra","ml-0","pl-12",2,"padding-left","0px!important"],["mat-icon-button","","color","default","matTooltip","Update Advert",3,"disabled","click"],["mat-icon-button","","color","default","matTooltip","Remove Advert",3,"disabled","click"],["mat-header-cell",""],["mat-sort-header","title",1,"table-header"],["mat-cell","",1,"table-cell"],["mat-sort-header","advertPackageDescription",1,"table-header"],["mat-sort-header","avatar",1,"table-header"],["style","max-width: 80px;max-height: 80px;","class","image",3,"src",4,"ngIf"],["style","max-width: 80px;max-height: 80px;","src","assets/images/no-image.jpg","class","image",4,"ngIf"],[1,"image",2,"max-width","80px","max-height","80px",3,"src"],["src","assets/images/no-image.jpg",1,"image",2,"max-width","80px","max-height","80px"],["mat-sort-header","statusDescription",1,"table-header"],["mat-header-row",""],["mat-row",""]],template:function(a,n){1&a&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t.TgZ(4,"mat-form-field",4),t.TgZ(5,"input",5,6),t.NdJ("keyup",function(d){return n.applyFilter(d)}),t.qZA(),t.qZA(),t.TgZ(7,"div",7),t.TgZ(8,"mat-card",8),t.TgZ(9,"table",9),t.ynx(10,10),t.YNc(11,tt,4,1,"th",11),t.YNc(12,et,7,2,"td",12),t.BQk(),t.ynx(13,13),t.YNc(14,at,3,0,"th",14),t.YNc(15,it,2,1,"td",15),t.BQk(),t.ynx(16,16),t.YNc(17,nt,3,0,"th",14),t.YNc(18,rt,2,1,"td",15),t.BQk(),t.ynx(19,17),t.YNc(20,ot,3,0,"th",14),t.YNc(21,ct,3,2,"td",15),t.BQk(),t.ynx(22,18),t.YNc(23,dt,3,0,"th",14),t.YNc(24,mt,2,1,"td",15),t.BQk(),t.YNc(25,gt,1,0,"tr",19),t.YNc(26,ut,1,0,"tr",20),t.qZA(),t._UZ(27,"mat-paginator",21),t.qZA(),t.qZA(),t.qZA(),t.TgZ(28,"div",22),t._UZ(29,"advert"),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&a&&(t.xp6(9),t.Q6J("dataSource",n.dataSource),t.xp6(16),t.Q6J("matHeaderRowDef",n.displayedColumns)("matHeaderRowDefSticky",!0),t.xp6(1),t.Q6J("matRowDefColumns",n.displayedColumns),t.xp6(1),t.Q6J("pageSizeOptions",t.DdM(7,pt))("pageSize",10)("disabled",n.loading))},directives:[g.KE,v.Nt,G.a8,p.BZ,Z.YE,p.w1,p.fO,p.Dz,p.as,p.nj,A.NW,$.I,p.ge,x.lW,X.gM,V.Hw,p.ev,Z.nU,m.O5,p.XQ,p.Gk],encapsulation:2}),i})();var ft=s(7776);const vt=[{path:"",component:ht}];let _t=(()=>{class i{}return i.\u0275fac=function(a){return new(a||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[[D.Bz.forChild(vt),ft.m]]}),i})()},3098:(O,I)=>{var D=function(){function r(e){if(!e)throw new TypeError("Invalid argument; `value` has no value.");this.value=r.EMPTY,e&&r.isGuid(e)&&(this.value=e)}return r.isGuid=function(e){var A=e.toString();return e&&(e instanceof r||r.validator.test(A))},r.create=function(){return new r([r.gen(2),r.gen(1),r.gen(1),r.gen(1),r.gen(3)].join("-"))},r.createEmpty=function(){return new r("emptyguid")},r.parse=function(e){return new r(e)},r.raw=function(){return[r.gen(2),r.gen(1),r.gen(1),r.gen(1),r.gen(3)].join("-")},r.gen=function(e){for(var A="",Z=0;Z<e;Z++)A+=(65536*(1+Math.random())|0).toString(16).substring(1);return A},r.prototype.equals=function(e){return r.isGuid(e)&&this.value===e.toString()},r.prototype.isEmpty=function(){return this.value===r.EMPTY},r.prototype.toString=function(){return this.value},r.prototype.toJSON=function(){return{value:this.value}},r.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),r.EMPTY="00000000-0000-0000-0000-000000000000",r}();I.i=D}}]);